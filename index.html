<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Analista TI TJPE</title>
    <!-- Incluindo Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Definindo a fonte Inter como padrão */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Estilos personalizados para o gradiente de fundo */
        .bg-gradient-blue {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        /* Estilo para a barra de foco do input */
        .input-focus-ring:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.5);
            /* Cor verde esmeralda com opacidade */
        }

        /* Estilos para os cards de fase */
        .phase-card,
        .mission-card {
            background-color: #2c3e50;
            /* Fundo mais escuro para os cards */
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
            min-height: 180px;
            /* Garante altura mínima para alinhamento */
        }

        .phase-card:hover,
        .mission-card:hover {
            transform: translateY(-5px);
            cursor: pointer;
        }

        .phase-card-icon,
        .mission-card-icon {
            font-size: 3em;
            /* Tamanho do ícone */
            margin-bottom: 15px;
        }

        /* Estilo para texto justificado */
        .text-justify {
            text-align: justify;
        }

        /* Estilo para as caixas de teoria */
        .theory-box {
            background-color: #2c3e50;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
            /* Garante que o conteúdo interno seja justificado */
            color: #ecf0f1;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .theory-box p {
            margin-bottom: 10px;
            /* Espaço entre os parágrafos de teoria */
            line-height: 1.6;
            /* Aumenta a legibilidade */
        }

        .theory-box strong {
            color: #2ecc71;
            /* Cor para os títulos em negrito dentro da teoria */
        }

        /* Estilos para alternativas de questões */
        .alternative-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 8px;
            border-radius: 8px;
            background-color: #3a506b;
            /* Fundo azul mais escuro para as alternativas */
            color: #ecf0f1;
            /* Texto claro */
            text-align: left;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .alternative-button:hover:not(:disabled) {
            background-color: #4a607b;
            /* Levemente mais claro no hover */
            transform: translateY(-2px);
        }

        .alternative-button:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        .alternative-button.correct {
            background-color: #a7e6b7;
            /* Verde claro para acerto */
            color: #2c3e50;
            /* Texto escuro para contraste */
        }

        .alternative-button.incorrect {
            background-color: #f7baba;
            /* Vermelho claro para erro */
            color: #2c3e50;
            /* Texto escuro para contraste */
        }

        .feedback-box {
            background-color: #3a506b;
            /* Cor de fundo para a caixa de feedback */
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: justify;
            color: #ecf0f1;
            /* Texto claro */
        }

        .feedback-box p {
            margin-bottom: 5px;
        }

        .feedback-box strong {
            color: #ecf0f1;
            /* Cor para os títulos em negrito dentro do feedback */
        }

        .score-display {
            font-size: 0.9em;
            color: #a0aec0;
            margin-top: 5px;
        }

        .redaction-content {
            white-space: pre-wrap;
            /* Preserva quebras de linha e espaços */
            text-align: justify;
            line-height: 1.5;
            max-height: 450px;
            /* Aproximadamente 30 linhas A4 com line-height 1.5 e font-size padrão */
            overflow-y: auto;
            /* Adiciona scroll se exceder */
            border: 1px solid #4a607b;
            padding: 15px;
            border-radius: 8px;
            background-color: #3a506b;
            color: #ecf0f1;
        }
    </style>
</head>

<body class="bg-gradient-blue min-h-screen flex items-center justify-center p-4">

    <!-- Container da Tela Inicial -->
    <div id="initialScreen"
        class="bg-[#34495e] rounded-xl shadow-2xl p-8 sm:p-10 md:p-12 lg:p-16 text-center max-w-lg sm:max-w-xl md:max-w-2xl w-full">

        <!-- Cabeçalho do jogo - Tela Inicial -->
        <div class="mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-white flex items-center justify-center gap-3">
                <span role="img" aria-label="Target icon">🎯</span> Game Analista TI TJPE
            </h1>
            <p class="text-base sm:text-lg text-gray-300 mt-2">
                Prepare-se para o concurso com questões baseadas no padrão da banca IBFC
            </p>
        </div>

        <!-- Seção de boas-vindas e interação - Tela Inicial -->
        <div class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-8 shadow-inner">
            <h2 class="text-2xl sm:text-3xl font-semibold text-white mb-4 flex items-center justify-center gap-3">
                <span role="img" aria-label="Rocket icon">🚀</span> Bem-vindo ao Simulado Interativo!
            </h2>
            <p class="text-sm sm:text-base text-gray-300 mb-6">
                Teste seus conhecimentos em 8 fases baseadas no edital do concurso TJPE - Analista de TI
            </p>
            <input type="text" id="playerNameInput" placeholder="Helton Leite"
                class="input-focus-ring w-full p-3 rounded-md bg-gray-100 text-gray-800 text-lg sm:text-xl text-center mb-6 border-2 border-transparent focus:border-green-400 transition duration-300 ease-in-out">
            <button id="startGameButton"
                class="bg-[#2ecc71] hover:bg-[#27ae60] text-white font-bold py-3 px-8 rounded-full text-lg sm:text-xl transition duration-300 ease-in-out shadow-lg flex items-center justify-center gap-3 mx-auto">
                <span role="img" aria-label="Game controller icon">🎮</span> Iniciar Jogo
            </button>
        </div>

        <!-- Lista de fases do jogo - Tela Inicial -->
        <div class="text-left">
            <h3 class="text-xl sm:text-2xl font-semibold text-white mb-4 flex items-center gap-3">
                <span role="img" aria-label="Book icon">📖</span> Fases do Jogo:
            </h3>
            <ul class="text-gray-200 text-sm sm:text-base space-y-2 list-none pl-0">
                <li>• <strong>Fase 1:</strong> Metodologias de Desenvolvimento e Arquitetura de Software</li>
                <li>• <strong>Fase 2:</strong> Programação, Computação em Nuvem e Microsserviços</li>
                <li>• <strong>Fase 3:</strong> Banco de Dados e Persistência</li>
                <li>• <strong>Fase 4:</strong> Ciências de Dados e Business Intelligence</li>
                <li>• <strong>Fase 5:</strong> Inteligência Artificial e Machine Learning</li>
                <li>• <strong>Fase 6:</strong> Segurança da Informação</li>
                <li>• <strong>Fase 7:</strong> Governança de TI e Gestão de Projetos</li>
                <li>• <strong>Fase 8:</strong> Legislação e Ética em TI</li>
            </ul>
        </div>

    </div>

    <!-- Container da Seleção de Fases (Inicialmente oculto) -->
    <div id="phaseSelectionScreen"
        class="hidden bg-[#34495e] rounded-xl shadow-2xl p-8 sm:p-10 md:p-12 lg:p-16 text-center max-w-full sm:max-w-4xl lg:max-w-5xl w-full">

        <!-- Cabeçalho do jogo - Seleção de Fases -->
        <div class="mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-white flex items-center justify-center gap-3">
                <span role="img" aria-label="Target icon">🎯</span> Game Analista TI TJPE
            </h1>
            <p class="text-base sm:text-lg text-gray-300 mt-2">
                Prepare-se para o concurso com questões baseadas no padrão da banca IBFC
            </p>
        </div>

        <!-- Seção de seleção de fase e informações do jogador -->
        <div
            class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-8 shadow-inner flex flex-col md:flex-row justify-between items-center">
            <h2 class="text-2xl sm:text-3xl font-semibold text-white mb-4 md:mb-0 flex items-center gap-3">
                <span role="img" aria-label="Target icon">🎯</span> Selecione uma Fase
            </h2>
            <div class="flex items-center gap-4 text-white text-lg sm:text-xl">
                <span class="flex items-center gap-2">
                    <span role="img" aria-label="User icon">👤</span> <span id="displayedPlayerName">Helton Leite</span>
                </span>
                <span
                    class="flex items-center gap-2 bg-[#e67e22] px-3 py-1 rounded-full text-base sm:text-lg font-bold">
                    <span role="img" aria-label="Trophy icon">🏆</span> <span id="totalScoreDisplay">0</span> pontos
                </span>
            </div>
        </div>

        <!-- Grid de Cards de Fases -->
        <div id="phasesGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8">
            <!-- Os cards de fase agora têm um atributo data-phase-id e data-phase-title -->
            <div class="phase-card" data-phase-id="1"
                data-phase-title="Fase 1: Metodologias de Desenvolvimento e Arquitetura de Software">
                <span class="phase-card-icon" role="img" aria-label="Building icon">🏗️</span>
                <p class="text-white font-bold text-lg mb-2">Fase 1: Metodologias de Desenvolvimento e Arquitetura de
                    Software</p>
                <p class="text-gray-400 text-sm score-display" id="phase-1-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="2"
                data-phase-title="Fase 2: Programação, Computação em Nuvem e Microsserviços">
                <span class="phase-card-icon" role="img" aria-label="Cloud icon">☁️</span>
                <p class="text-white font-bold text-lg mb-2">Fase 2: Programação, Computação em Nuvem e Microsserviços
                </p>
                <p class="text-gray-400 text-sm score-display" id="phase-2-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="3" data-phase-title="Fase 3: Banco de Dados e Persistência">
                <span class="phase-card-icon" role="img" aria-label="Database icon">🗄️</span>
                <p class="text-white font-bold text-lg mb-2">Fase 3: Banco de Dados e Persistência</p>
                <p class="text-gray-400 text-sm score-display" id="phase-3-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="4"
                data-phase-title="Fase 4: Ciências de Dados e Business Intelligence">
                <span class="phase-card-icon" role="img" aria-label="Bar chart icon">📊</span>
                <p class="text-white font-bold text-lg mb-2">Fase 4: Ciências de Dados e Business Intelligence</p>
                <p class="text-gray-400 text-sm score-display" id="phase-4-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="5"
                data-phase-title="Fase 5: Inteligência Artificial e Machine Learning">
                <span class="phase-card-icon" role="img" aria-label="Robot icon">🤖</span>
                <p class="text-white font-bold text-lg mb-2">Fase 5: Inteligência Artificial e Machine Learning</p>
                <p class="text-gray-400 text-sm score-display" id="phase-5-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="6" data-phase-title="Fase 6: Segurança da Informação">
                <span class="phase-card-icon" role="img" aria-label="Lock icon">🔒</span>
                <p class="text-white font-bold text-lg mb-2">Fase 6: Segurança da Informação</p>
                <p class="text-gray-400 text-sm score-display" id="phase-6-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="7" data-phase-title="Fase 7: Governança de TI e Gestão de Projetos">
                <span class="phase-card-icon" role="img" aria-label="Scales icon">⚖️</span>
                <p class="text-white font-bold text-lg mb-2">Fase 7: Governança de TI e Gestão de Projetos</p>
                <p class="text-gray-400 text-sm score-display" id="phase-7-score">Acertos: 0, Erros: 0</p>
            </div>
            <div class="phase-card" data-phase-id="8" data-phase-title="Fase 8: Legislação e Ética em TI">
                <span class="phase-card-icon" role="img" aria-label="Scroll icon">📜</span>
                <p class="text-white font-bold text-lg mb-2">Fase 8: Legislação e Ética em TI</p>
                <p class="text-gray-400 text-sm score-display" id="phase-8-score">Acertos: 0, Erros: 0</p>
            </div>
        </div>

        <!-- Botões de navegação inferior -->
        <div class="flex flex-col sm:flex-row justify-between gap-4">
            <button id="backToStartButton"
                class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-full text-lg sm:text-xl transition duration-300 ease-in-out shadow-lg flex items-center justify-center gap-3">
                <span role="img" aria-label="House icon">🏠</span> Voltar ao Início
            </button>
            <button id="viewReportButton"
                class="bg-[#2ecc71] hover:bg-[#27ae60] text-white font-bold py-3 px-8 rounded-full text-lg sm:text-xl transition duration-300 ease-in-out shadow-lg flex items-center justify-center gap-3">
                <span role="img" aria-label="Chart icon">📈</span> Ver Relatório Final
            </button>
        </div>

    </div>

    <!-- Container da Tela de Missões (Inicialmente oculto) -->
    <div id="missionScreen"
        class="hidden bg-[#34495e] rounded-xl shadow-2xl p-8 sm:p-10 md:p-12 lg:p-16 text-center max-w-full sm:max-w-4xl lg:max-w-5xl w-full">

        <!-- Cabeçalho do jogo - Tela de Missões -->
        <div class="mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-white flex items-center justify-center gap-3">
                <span role="img" aria-label="Target icon">🎯</span> Game Analista TI TJPE
            </h1>
            <p class="text-base sm:text-lg text-gray-300 mt-2">
                Prepare-se para o concurso com questões baseadas no padrão da banca IBFC
            </p>
        </div>

        <!-- Título da Fase e Contexto -->
        <div class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-8 shadow-inner">
            <h2 id="missionPhaseTitle" class="text-2xl sm:text-3xl font-semibold text-white mb-4 text-center">
                <!-- Título da fase será inserido aqui pelo JS -->
            </h2>
            <h3
                class="text-xl sm:text-2xl font-semibold text-white mb-3 text-center flex items-center justify-center gap-2">
                <span role="img" aria-label="Context icon">📝</span> Contexto
            </h3>
            <p id="missionContextText" class="text-sm sm:text-base text-gray-300 text-justify leading-relaxed">
                <!-- Texto de contexto será inserido aqui pelo JS -->
            </p>
        </div>

        <!-- Novo Quadro para Geração de Redação -->
        <div class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-8 shadow-inner text-white text-left">
            <h3
                class="text-xl sm:text-2xl font-semibold text-white mb-4 text-center flex items-center justify-center gap-2">
                <span role="img" aria-label="Pencil icon">✏️</span> Desafio de Redação
            </h3>
            <button id="gerarTemaRedacaoBtn"
                class="w-full sm:w-auto px-8 py-4 bg-purple-600 text-white font-bold text-lg rounded-xl shadow-xl hover:bg-purple-700 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-300 active:bg-purple-800 mx-auto block mb-4">
                Gerar Tema de Redação
            </button>
            <div id="loadingRedacaoTheme"
                class="hidden text-center mt-4 p-2 bg-blue-50 text-blue-700 rounded-lg shadow-inner animate-pulse">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                    <span>Gerando tema...</span>
                </div>
            </div>
            <div id="temaRedacaoOutput" class="mt-4 p-4 bg-[#3a506b] rounded-lg hidden">
                <p class="font-bold text-lg mb-2">Tema:</p>
                <p id="redacaoTema" class="mb-4"></p>
                <p class="font-bold text-lg mb-2">Tópicos:</p>
                <ul id="redacaoTopicos" class="list-disc list-inside"></ul>
            </div>

            <button id="verEspelhoRedacaoBtn"
                class="hidden w-full sm:w-auto px-8 py-4 bg-green-600 text-white font-bold text-lg rounded-xl shadow-xl hover:bg-green-700 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-300 active:bg-green-800 mx-auto block mt-6">
                Ver Espelho Padrão da Redação
            </button>
            <div id="loadingEspelhoRedacao"
                class="hidden text-center mt-4 p-2 bg-blue-50 text-blue-700 rounded-lg shadow-inner animate-pulse">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                    <span>Gerando espelho...</span>
                </div>
            </div>
            <div id="espelhoRedacaoOutput" class="redaction-content mt-4 hidden">
                <!-- Espelho da redação será inserido aqui -->
            </div>
        </div>

        <!-- Grid de Cards de Missões -->
        <div id="missionsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Missões serão carregadas aqui via JavaScript -->
        </div>

        <!-- Botões de navegação inferior da tela de missões -->
        <div class="flex justify-center">
            <button id="backToPhaseSelectionButton"
                class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-full text-lg sm:text-xl transition duration-300 ease-in-out shadow-lg flex items-center justify-center gap-3">
                <span role="img" aria-label="Back icon">↩️</span> Voltar para Seleção de Fases
            </button>
        </div>

    </div>

    <!-- Container da Tela de Teoria (Inicialmente oculto) -->
    <div id="theoryScreen"
        class="hidden bg-[#34495e] rounded-xl shadow-2xl p-8 sm:p-10 md:p-12 lg:p-16 text-center max-w-full sm:max-w-4xl lg:max-w-5xl w-full">
        <!-- Cabeçalho do jogo - Tela de Teoria -->
        <div class="mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-white flex items-center justify-center gap-3">
                <span role="img" aria-label="Target icon">🎯</span> Game Analista TI TJPE
            </h1>
            <p class="text-base sm:text-lg text-gray-300 mt-2">
                Prepare-se para o concurso com questões baseadas no padrão da banca IBFC
            </p>
        </div>

        <div class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-8 shadow-inner">
            <h2 id="theoryMissionTitle" class="text-2xl sm:text-3xl font-semibold text-white mb-4 text-center">
                <!-- Título da missão será inserido aqui pelo JS -->
            </h2>
            <div id="theoryContent" class="theory-box text-justify">
                <!-- Conteúdo da teoria será inserido aqui pelo JS -->
            </div>

            <!-- Botão para gerar questões -->
            <button id="gerarQuestoesBtn"
                class="w-full sm:w-auto px-8 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold text-lg rounded-xl shadow-xl hover:from-blue-600 hover:to-indigo-700 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 active:bg-indigo-800 mt-8 mx-auto block">
                Gerar 5 Questões IBFC
            </button>

            <!-- Indicador de Carregamento -->
            <div id="loadingIndicator"
                class="hidden text-center mt-6 p-4 bg-blue-50 text-blue-700 rounded-lg shadow-inner animate-pulse">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                    <span>Gerando questões... Por favor, aguarde.</span>
                </div>
            </div>

            <!-- Div onde as questões geradas serão inseridas -->
            <div id="questoes-geradas" class="mt-12 text-left">
                <!-- As questões aparecerão aqui -->
            </div>
        </div>

        <div class="flex justify-center mt-8">
            <button id="backToMissionsButton"
                class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-full text-lg sm:text-xl transition duration-300 ease-in-out shadow-lg flex items-center justify-center gap-3">
                <span role="img" aria-label="Back icon">↩️</span> Voltar para Missões
            </button>
        </div>
    </div>

    <!-- Container da Tela de Relatório Final (Inicialmente oculto) -->
    <div id="reportScreen"
        class="hidden bg-[#34495e] rounded-xl shadow-2xl p-8 sm:p-10 md:p-12 lg:p-16 text-center max-w-full sm:max-w-4xl lg:max-w-5xl w-full">
        <h1 class="text-3xl sm:text-4xl font-bold text-white mb-8">
            <span role="img" aria-label="Report icon">📈</span> Relatório Final de Desempenho
        </h1>

        <div class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-8 shadow-inner text-white text-left">
            <h2 class="text-2xl font-semibold mb-4">Resumo Geral</h2>
            <p class="text-lg mb-2"><strong>Jogador:</strong> <span id="reportPlayerName"></span></p>
            <p class="text-lg mb-2"><strong>Pontuação Total:</strong> <span id="reportTotalScore"></span> pontos</p>
            <p class="text-lg mb-4"><strong>Total de Acertos:</strong> <span id="reportTotalCorrect"></span> |
                <strong>Total de Erros:</strong> <span id="reportTotalIncorrect"></span></p>
        </div>

        <div id="reportDetails" class="text-left">
            <!-- Detalhes das fases e missões serão inseridos aqui -->
        </div>

        <div class="flex justify-center mt-8">
            <button id="backToPhaseSelectionFromReportButton"
                class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-full text-lg sm:text-xl transition duration-300 ease-in-out shadow-lg flex items-center justify-center gap-3">
                <span role="img" aria-label="Back icon">↩️</span> Voltar para Seleção de Fases
            </button>
        </div>
    </div>


    <script>
        // Objeto global para armazenar os dados do jogo
        let gameData = {
            playerName: '',
            totalScore: 0,
            totalCorrectAnswers: 0,
            totalIncorrectAnswers: 0,
            currentPhaseId: null,
            currentMissionId: null,
            phases: {
                '1': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '2': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '3': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '4': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '5': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '6': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '7': { score: 0, correct: 0, incorrect: 0, missions: {} },
                '8': { score: 0, correct: 0, incorrect: 0, missions: {} },
            }
        };

        // Variáveis para armazenar o tema e tópicos da redação gerada
        let currentRedacaoTheme = '';
        let currentRedacaoTopics = [];

        document.addEventListener('DOMContentLoaded', () => {
            const initialScreen = document.getElementById('initialScreen');
            const phaseSelectionScreen = document.getElementById('phaseSelectionScreen');
            const missionScreen = document.getElementById('missionScreen');
            const theoryScreen = document.getElementById('theoryScreen');
            const reportScreen = document.getElementById('reportScreen'); // Nova tela de relatório

            const startGameButton = document.getElementById('startGameButton');
            const playerNameInput = document.getElementById('playerNameInput');
            const displayedPlayerName = document.getElementById('displayedPlayerName');
            const totalScoreDisplay = document.getElementById('totalScoreDisplay');

            const backToStartButton = document.getElementById('backToStartButton');
            const phasesGrid = document.getElementById('phasesGrid');
            const missionPhaseTitle = document.getElementById('missionPhaseTitle');
            const missionContextText = document.getElementById('missionContextText');
            const missionsGrid = document.getElementById('missionsGrid');
            const backToPhaseSelectionButton = document.getElementById('backToPhaseSelectionButton');
            const theoryMissionTitle = document.getElementById('theoryMissionTitle');
            const theoryContent = document.getElementById('theoryContent');
            const backToMissionsButton = document.getElementById('backToMissionsButton');

            // Elementos para geração de questões
            const gerarQuestoesBtn = document.getElementById('gerarQuestoesBtn');
            const questoesGeradasDiv = document.getElementById('questoes-geradas');
            const loadingIndicator = document.getElementById('loadingIndicator');

            // Elementos do Relatório Final
            const viewReportButton = document.getElementById('viewReportButton');
            const backToPhaseSelectionFromReportButton = document.getElementById('backToPhaseSelectionFromReportButton');
            const reportPlayerName = document.getElementById('reportPlayerName');
            const reportTotalScore = document.getElementById('reportTotalScore');
            const reportTotalCorrect = document.getElementById('reportTotalCorrect');
            const reportTotalIncorrect = document.getElementById('reportTotalIncorrect');
            const reportDetails = document.getElementById('reportDetails');

            // Elementos para Geração de Redação
            const gerarTemaRedacaoBtn = document.getElementById('gerarTemaRedacaoBtn');
            const loadingRedacaoTheme = document.getElementById('loadingRedacaoTheme');
            const temaRedacaoOutput = document.getElementById('temaRedacaoOutput');
            const redacaoTema = document.getElementById('redacaoTema');
            const redacaoTopicos = document.getElementById('redacaoTopicos');
            const verEspelhoRedacaoBtn = document.getElementById('verEspelhoRedacaoBtn');
            const loadingEspelhoRedacao = document.getElementById('loadingEspelhoRedacao');
            const espelhoRedacaoOutput = document.getElementById('espelhoRedacaoOutput');


            // Função para atualizar a exibição da pontuação em todas as telas
            const updateScoreDisplays = () => {
                totalScoreDisplay.textContent = gameData.totalScore;
                // Atualiza os scores nos cards de fase
                for (const phaseId in gameData.phases) {
                    const phaseData = gameData.phases[phaseId];
                    const phaseScoreElement = document.getElementById(`phase-${phaseId}-score`);
                    if (phaseScoreElement) {
                        phaseScoreElement.textContent = `Acertos: ${phaseData.correct}, Erros: ${phaseData.incorrect}`;
                    }
                }
            };

            // Função para gerar o conteúdo das missões e contexto de cada fase
            const getPhaseContent = (phaseId, phaseTitle) => {
                let context = '';
                let missions = [];

                switch (phaseId) {
                    case '1':
                        context = `No contexto de um Tribunal de Justiça de Pernambuco (TJPE), as metodologias de desenvolvimento e arquitetura de software são a espinha dorsal para a criação de sistemas que suportam a agilidade e a transparência da justiça. Desde o planejamento de novas ferramentas para digitalização de processos até a atualização de sistemas legados, cada etapa requer uma abordagem estruturada para garantir eficiência, segurança e conformidade com as exigências legais e operacionais. Compreender esses fundamentos é crucial para construir soluções robustas que impactam diretamente a celeridade e a qualidade dos serviços judiciais.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Especificação de Requisitos Funcionais e Não Funcionais',
                                icon: '📝',
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Funcionais:</strong> Descrevem as funções que o sistema deve realizar, ou seja, o que o sistema fará para o usuário. No TJPE, isso pode incluir a capacidade de registrar novos processos, consultar o andamento de um processo por número, anexar documentos digitalizados, emitir certidões, ou realizar audiências por videoconferência. São as funcionalidades essenciais para o uso diário do sistema judicial.</p>
                                    <p><strong>Não funcionais:</strong> Definem como o sistema deve operar, focando em atributos de qualidade. No contexto do TJPE, isso é crucial. Incluem requisitos de desempenho (o tempo de resposta para uma consulta de processo), segurança (proteção contra acesso não autorizado a dados sigilosos), usabilidade (facilidade de uso para magistrados e servidores), confiabilidade (disponibilidade do sistema 24/7), escalabilidade (suporte a um aumento no número de usuários e processos) e conformidade (aderência a leis como a LGPD e regulamentações do CNJ). A negligência desses requisitos pode comprometer a operação do tribunal e a confiança pública.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Modelagem de Processos de Negócios (BPMN)',
                                icon: '📈',
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Modelagem de Processos de Negócios (BPMN):</strong> É uma notação gráfica padrão para modelar processos de negócio de forma clara e compreensível para todos os envolvidos, sejam eles técnicos ou não. No TJPE, o BPMN é fundamental para mapear e otimizar fluxos de trabalho complexos, como o trâmite de um processo judicial, desde sua petição inicial até a sentença e arquivamento. A visualização desses processos permite identificar gargalos, redundâncias e oportunidades de automação, agilizando a prestação jurisdicional e garantindo a padronização dos procedimentos em todas as varas e comarcas. Facilita a comunicação entre as equipes de TI e os usuários de negócio do tribunal, assegurando que os sistemas desenvolvidos estejam perfeitamente alinhados com as necessidades operacionais.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'Metodologias Ágeis (Scrum e Kanban)',
                                icon: '⚡',
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Scrum:</strong> É um framework ágil para gerenciar projetos complexos, ideal para o desenvolvimento de software no TJPE onde a agilidade e a capacidade de resposta a mudanças são cruciais. Ele divide o trabalho em ciclos curtos e iterativos chamados "sprints" (geralmente de 2 a 4 semanas), com equipes auto-organizadas e multifuncionais. No TJPE, a aplicação do Scrum permite que novas funcionalidades para o PJe ou outros sistemas sejam entregues incrementalmente, com feedback constante dos usuários (magistrados, servidores, advogados). Isso reduz riscos, melhora a qualidade do software e garante que as soluções atendam às necessidades em constante evolução do ambiente jurídico, como novas legislações ou demandas urgentes.</p>
                                    <p><strong>Kanban:</strong> É uma metodologia visual para gerenciar o fluxo de trabalho, focando na otimização da entrega e na redução de gargalos. No TJPE, um quadro Kanban pode ser utilizado para visualizar o fluxo de tarefas de manutenção de sistemas, resolução de chamados ou até mesmo o acompanhamento de processos administrativos internos do setor de TI. Ele permite que as equipes identifiquem rapidamente onde o trabalho está "parado", limitem a quantidade de trabalho em andamento (Work In Progress - WIP) e melhorem continuamente a eficiência. A transparência e a flexibilidade do Kanban são valiosas para gerenciar as demandas dinâmicas de um tribunal, garantindo que as prioridades sejam sempre claras e que as entregas ocorram de forma fluida.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'Metodologias de Inovação (Design Thinking, Lean Startup e Open Innovation)',
                                icon: '💡',
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Design Thinking:</strong> É uma abordagem centrada no ser humano para a resolução de problemas e inovação, com foco na compreensão profunda das necessidades dos usuários (magistrados, servidores, cidadãos). No TJPE, o Design Thinking pode ser aplicado para redesenhar serviços digitais, melhorar a experiência do usuário em sistemas existentes ou conceber novas soluções para desafios judiciais complexos. As etapas de empatia, definição, ideação, prototipagem e teste garantem que as soluções desenvolvidas sejam realmente úteis, desejáveis e viáveis, gerando maior aceitação e impacto positivo no ambiente do tribunal.</p>
                                    <p><strong>Lean Startup:</strong> É uma metodologia para desenvolver produtos e serviços de forma rápida e eficiente, testando ideias no mercado com o mínimo de recursos. Embora seja mais comum em startups, seus princípios de "construir-medir-aprender" são aplicáveis no TJPE para o desenvolvimento de novas funcionalidades ou sistemas piloto. Em vez de lançar grandes projetos de uma vez, é possível desenvolver um "Produto Mínimo Viável" (MVP) e validá-lo com usuários reais, ajustando o curso com base no feedback. Isso minimiza riscos, otimiza o uso de recursos públicos e acelera a entrega de valor à sociedade.</p>
                                    <p><strong>Open Innovation:</strong> Envolve a colaboração com agentes externos (universidades, outras instituições públicas, empresas de tecnologia, startups) para acelerar a inovação. Para o TJPE, a Open Innovation pode significar parcerias para desenvolver soluções de inteligência artificial, compartilhar conhecimentos sobre cibersegurança ou adotar tecnologias desenvolvidas em outros tribunais ou setores. Essa abordagem permite ao tribunal acessar um vasto pool de talentos e ideias, complementando suas capacidades internas e promovendo a modernização do sistema judiciário de forma mais abrangente e eficaz.</p>
                                `
                            }
                        ];
                        break;
                    case '2':
                        context = `A Fase 2 mergulha nas **tecnologias fundamentais** que impulsionam a modernização e a eficiência dos sistemas de TI no Tribunal de Justiça de Pernambuco (TJPE). Desde a **programação orientada a objetos** em Java, que forma a base para muitos sistemas robustos, até a **computação em nuvem** e as **arquiteturas de microsserviços**, que permitem escalabilidade e agilidade, esta fase explora as ferramentas e práticas essenciais para o desenvolvimento, implantação e gerenciamento de soluções tecnológicas de ponta. Inclui ainda as abordagens de **DevOps** para automação e integração contínua, os mecanismos de **comunicação entre sistemas (APIs e mensageria)**, a **persistência de dados** e a **autenticação segura**, elementos cruciais para garantir a **confiabilidade, segurança e o bom funcionamento** das plataformas que servem à justiça pernambucana.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Programação Orientada a Objetos (Java)',
                                icon: '☕', // Ícone de Java/POO
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Programação orientada a objetos (Java):</strong> É um paradigma de programação que organiza o design do software em torno de objetos, em vez de funções e lógica. No contexto do TJPE, onde sistemas complexos e modulares são necessários para gerenciar processos judiciais, a POO em Java permite a criação de código reutilizável, de fácil manutenção e escalável. Isso é essencial para construir e evoluir aplicações como o Processo Judicial Eletrônico (PJe), sistemas de gestão de recursos humanos ou plataformas de atendimento ao cidadão.</p>
                                    <p><strong>Encapsulamento:</strong> É o mecanismo de agrupar dados (atributos) e o código que opera esses dados (métodos) em uma única unidade, o objeto, e de restringir o acesso direto a alguns dos componentes do objeto. No TJPE, o encapsulamento é vital para proteger informações sensíveis e garantir que os dados sejam manipulados apenas por métodos autorizados, o que é fundamental para a segurança e integridade de dados processuais e pessoais.</p>
                                    <p><strong>Herança:</strong> É um mecanismo que permite que uma classe herde características (atributos e métodos) de outra classe. Isso promove a reutilização de código e a criação de uma hierarquia de classes. Para o TJPE, a herança pode ser aplicada na modelagem de diferentes tipos de processos (cível, criminal, trabalhista) ou usuários (juiz, promotor, servidor), onde características comuns são definidas em uma classe base e especializadas em subclasses.</p>
                                    <p><strong>Polimorfismo:</strong> Significa "muitas formas" e permite que objetos de diferentes classes sejam tratados de maneira uniforme, desde que compartilhem uma interface comum. No TJPE, o polimorfismo pode ser usado para lidar com diferentes tipos de documentos ou decisões judiciais de forma padronizada, onde o mesmo método pode se comportar de maneira diferente dependendo do tipo específico do objeto, simplificando o código e tornando-o mais flexível.</p>
                                    <p><strong>Abstração:</strong> É o processo de esconder os detalhes complexos de implementação e mostrar apenas a funcionalidade essencial ao usuário. No TJPE, a abstração é aplicada ao projetar sistemas onde o usuário interage com interfaces intuitivas, sem precisar entender a complexidade por trás do armazenamento de dados em bancos de dados ou a comunicação entre diversos microsserviços. Isso simplifica o uso e foca na funcionalidade principal do sistema.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Computação em Nuvem: Conceitos, Fundamentos e Aplicações',
                                icon: '☁️', // Ícone de nuvem
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Computação em Nuvem: conceitos, fundamentos e aplicações:</strong> Refere-se à entrega de recursos de computação (servidores, armazenamento, bancos de dados, redes, software, análise e inteligência) pela internet ("a nuvem"), com um modelo de pagamento conforme o uso. Para o TJPE, a computação em nuvem oferece benefícios como escalabilidade sob demanda (adaptar-se ao volume de processos), redução de custos com infraestrutura (pagar apenas pelo que usa), alta disponibilidade e recuperação de desastres. Aplicações podem incluir a hospedagem do PJe, sistemas de backup de dados judiciais, ambientes de desenvolvimento e teste, e serviços de análise de dados para gestão estratégica, garantindo que a justiça esteja sempre acessível e resiliente.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'Arquitetura baseada em Microsserviços',
                                icon: '🏗️', // Ícone de arquitetura
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Arquitetura baseada em microsserviços:</strong> É uma abordagem para o desenvolvimento de software na qual uma aplicação é construída como uma coleção de pequenos serviços independentes, que se comunicam por meio de APIs. Cada serviço é focado em uma única funcionalidade de negócio e pode ser desenvolvido, implantado e escalado de forma independente. No TJPE, adotar microsserviços permite modernizar sistemas legados e criar novas funcionalidades de forma mais rápida e resiliente. Por exemplo, o serviço de consulta de processos, o serviço de autenticação ou o serviço de anexação de documentos podem ser microsserviços separados, garantindo que a falha em um não afete o sistema inteiro e permitindo atualizações e evoluções contínuas sem interrupção dos serviços judiciais essenciais.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'DevOps e Integração Contínua: Git, GitLab CI/CD, Jenkins',
                                icon: '⚙️', // Ícone de engrenagem/automação
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>DevOps e Integração Contínua:</strong> DevOps é uma cultura e um conjunto de práticas que visa integrar as equipes de desenvolvimento (Dev) e operações (Ops) para automatizar e otimizar o processo de entrega de software. A Integração Contínua (CI) é uma prática de DevOps onde os desenvolvedores integram seu código em um repositório central várias vezes ao dia. Cada integração é verificada por um build automatizado, permitindo a detecção rápida de erros. No TJPE, DevOps e CI/CD (Continuous Integration/Continuous Delivery) são cruciais para acelerar a entrega de novas funcionalidades para o PJe e outros sistemas, garantindo maior confiabilidade e reduzindo o tempo de inatividade, o que é vital para a continuidade dos serviços judiciais.</p>
                                    <p><strong>Git:</strong> É um sistema de controle de versão distribuído, amplamente utilizado para rastrear mudanças no código-fonte durante o desenvolvimento de software. No TJPE, o Git permite que múltiplas equipes de desenvolvedores trabalhem simultaneamente em diferentes partes dos sistemas sem conflitos, mantendo um histórico completo de todas as alterações. Isso é essencial para colaboração, rastreabilidade de código e recuperação de versões anteriores, garantindo a integridade e a evolução dos sistemas do tribunal.</p>
                                    <p><strong>GitLab:</strong> É uma plataforma completa para o ciclo de vida de DevOps, que oferece funcionalidades como gerenciamento de repositórios Git, CI/CD, segurança e monitoramento. No TJPE, o GitLab pode ser a ferramenta central para gerenciar todos os projetos de desenvolvimento de software, desde a escrita do código até a implantação em produção. Seus recursos de CI/CD (GitLab CI/CD) permitem automatizar os testes e a implantação, garantindo entregas rápidas e seguras de novas funcionalidades e correções para os sistemas do tribunal.</p>
                                    <p><strong>CI/CD:</strong> Refere-se às práticas de Integração Contínua (CI) e Entrega Contínua (CD) ou Implantação Contínua (CD). CI é sobre integrar o código frequentemente e testá-lo automaticamente. CD estende isso, automatizando a entrega do código para ambientes de teste ou produção. No TJPE, a adoção de CI/CD significa que as atualizações de sistemas podem ser lançadas com maior frequência e confiabilidade, garantindo que as ferramentas jurídicas estejam sempre atualizadas e funcionando perfeitamente, com menos interrupções para os usuários finais.</p>
                                    <p><strong>Jenkins:</strong> É um servidor de automação open source que permite automatizar partes do processo de desenvolvimento de software relacionadas à construção, teste e implantação. No TJPE, o Jenkins pode ser configurado para ser o orquestrador central de pipelines de CI/CD, automatizando a compilação do código, a execução de testes de unidade e integração, e a implantação de novas versões de sistemas. Ele ajuda a garantir que os sistemas do tribunal sejam entregues com qualidade e rapidez, liberando a equipe de TI para focar em inovação.</p>
                                `
                            },
                            {
                                id: 5,
                                title: 'API RESTful, JSON, Framework Spring, Spring Cloud, Spring Boot, Spring Eureka, Zuul, Map Struct, Swagger, Service Discovery, API Gateway',
                                icon: '🔗', // Ícone de link/conexão
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>API RESTful:</strong> É um estilo de arquitetura para sistemas distribuídos que utiliza o protocolo HTTP para comunicação. No TJPE, APIs RESTful são essenciais para permitir que diferentes sistemas (como o PJe, sistemas de folha de pagamento ou portais de transparência) se comuniquem e troquem dados de forma eficiente. Elas garantem a interoperabilidade entre as diversas aplicações internas e externas do tribunal, facilitando a integração e a automação de processos.</p>
                                    <p><strong>JSON:</strong> (JavaScript Object Notation) É um formato de dados leve e legível por humanos, frequentemente utilizado para troca de dados entre um servidor e o aplicativo web, especialmente em APIs RESTful. No TJPE, o JSON é fundamental para o intercâmbio de informações estruturadas, como dados de processos, informações de partes ou resultados de consultas, entre diferentes sistemas e serviços, garantindo uma comunicação padronizada e eficiente.</p>
                                    <p><strong>Framework Spring:</strong> É um dos frameworks Java mais populares para o desenvolvimento de aplicações empresariais, conhecido por sua robustez e flexibilidade. No TJPE, o Spring pode ser a base para construir sistemas que gerenciam grandes volumes de dados e transações, como o PJe, garantindo alto desempenho, segurança e manutenibilidade. Ele simplifica o desenvolvimento de aplicações complexas, permitindo que os desenvolvedores foquem na lógica de negócio.</p>
                                    <p><strong>Spring Cloud:</strong> É um conjunto de ferramentas para construir aplicações baseadas em microsserviços na plataforma Spring. Para o TJPE, o Spring Cloud é vital para gerenciar a complexidade de uma arquitetura de microsserviços, oferecendo soluções para configuração centralizada, descoberta de serviços, balanceamento de carga, tolerância a falhas e roteamento de requisições. Isso permite que o tribunal construa e opere sistemas distribuídos de forma eficiente e confiável.</p>
                                    <p><strong>Spring Boot:</strong> É uma extensão do Framework Spring que simplifica o processo de criação de aplicações Spring autônomas e prontas para produção. No TJPE, o Spring Boot acelera o desenvolvimento de microsserviços, reduzindo a configuração manual e permitindo que as equipes de TI se concentrem na lógica de negócio. Isso é crucial para entregar novas funcionalidades e sistemas de forma rápida e eficiente.</p>
                                    <p><strong>Spring Eureka:</strong> É um servidor de Service Discovery fornecido pelo Spring Cloud. Em uma arquitetura de microsserviços do TJPE, onde os serviços estão constantemente sendo iniciados ou encerrados, o Eureka permite que um serviço registre sua localização e que outros serviços o descubram dinamicamente. Isso é fundamental para a comunicação eficiente entre os microsserviços, garantindo que eles sempre encontrem uns aos outros, mesmo em ambientes dinâmicos.</p>
                                    <p><strong>Zuul:</strong> É um serviço de roteamento e filtro da borda de um ecossistema de microsserviços, frequentemente usado como API Gateway. Para o TJPE, o Zuul pode ser o ponto de entrada único para todas as requisições externas para os microsserviços do tribunal, roteando-as para os serviços corretos. Ele também pode aplicar filtros para autenticação, segurança, monitoramento e limitação de taxa de requisições, protegendo e gerenciando o acesso aos sistemas judiciais.</p>
                                    <p><strong>MapStruct:</strong> É uma biblioteca de geração de código que simplifica a implementação de mapeamentos de dados entre diferentes objetos Java. No TJPE, onde a integração entre sistemas e a manipulação de dados em diferentes formatos é comum (ex: converter dados de um processo para diferentes representações), o MapStruct automatiza essa tarefa repetitiva, reduzindo erros e acelerando o desenvolvimento de interfaces de dados.</p>
                                    <p><strong>Swagger:</strong> (Atualmente conhecido como OpenAPI Specification) É uma ferramenta para documentar APIs RESTful de forma padronizada. Para o TJPE, o Swagger é essencial para manter uma documentação clara e interativa de todas as APIs expostas pelos microsserviços. Isso facilita a colaboração entre as equipes de desenvolvimento e a integração com sistemas de terceiros ou outras instituições, garantindo que o uso das APIs seja eficiente e compreensível.</p>
                                    <p><strong>Service Discovery:</strong> É um mecanismo que permite que serviços em uma arquitetura distribuída (como microsserviços) encontrem e se comuniquem uns com os outros sem a necessidade de pré-configuração estática. No TJPE, em um ambiente dinâmico com vários microsserviços, o Service Discovery (ex: Spring Eureka) garante que os componentes do sistema possam se localizar automaticamente, promovendo a resiliência e a escalabilidade dos sistemas do tribunal.</p>
                                    <p><strong>API Gateway:</strong> É um único ponto de entrada para múltiplas APIs ou microsserviços. Ele atua como um "proxy reverso" que roteia as requisições do cliente para o serviço apropriado. No TJPE, um API Gateway (ex: Zuul) pode centralizar a segurança, o rate limiting, o cache e o roteamento para todos os sistemas baseados em microsserviços, simplificando o acesso para usuários e outras aplicações, e protegendo a infraestrutura do tribunal.</p>
                                `
                            },
                            {
                                id: 6,
                                title: 'Persistência, JPA 2.0, Hibernate 4.3 ou superior, Hibernate Envers, Biblioteca Flyway',
                                icon: '💾', // Ícone de disco/armazenamento
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Persistência:</strong> Refere-se à capacidade de manter os dados armazenados de forma duradoura, mesmo após o encerramento da aplicação que os criou. No TJPE, a persistência de dados é o alicerce para todos os sistemas, garantindo que informações cruciais sobre processos, partes, sentenças e documentos sejam armazenadas de forma segura e possam ser recuperadas a qualquer momento. É a base para a integridade histórica e a continuidade das operações judiciais.</p>
                                    <p><strong>JPA 2.0:</strong> (Java Persistence API) É uma especificação Java para gerenciar dados relacionais em aplicações que usam o paradigma de objeto. Ela define um conjunto de interfaces e classes para mapear objetos Java para tabelas de banco de dados e vice-versa. No TJPE, a JPA simplifica o desenvolvimento de sistemas que interagem com bancos de dados, permitindo que os desenvolvedores trabalhem com objetos Java em vez de SQL diretamente, o que aumenta a produtividade e reduz erros no acesso a dados.</p>
                                    <p><strong>Hibernate 4.3 ou superior:</strong> É uma implementação popular da especificação JPA, sendo um framework de mapeamento objeto-relacional (ORM). Ele facilita a comunicação entre a aplicação Java e o banco de dados. No TJPE, o Hibernate é amplamente utilizado para gerenciar a persistência de dados em sistemas críticos, como o PJe, automatizando a criação de SQL e o mapeamento de resultados, garantindo a integridade e o desempenho no armazenamento de grandes volumes de informações judiciais.</p>
                                    <p><strong>Hibernate Envers:</strong> É um módulo do Hibernate que oferece funcionalidades de auditoria e versionamento de dados. Ele permite rastrear automaticamente as modificações em entidades persistentes, registrando quem fez a mudança, quando e qual era o estado anterior. No TJPE, o Hibernate Envers é crucial para atender a requisitos de auditoria rigorosos em sistemas judiciais, permitindo a rastreabilidade completa de todas as alterações em processos, decisões e documentos, o que é vital para a transparência e a conformidade legal.</p>
                                    <p><strong>Biblioteca Flyway:</strong> É uma ferramenta de migração de banco de dados open source que gerencia as alterações no esquema do banco de dados ao longo do tempo. No TJPE, onde os sistemas estão em constante evolução e os bancos de dados precisam ser atualizados de forma controlada, o Flyway automatiza a aplicação de scripts SQL de forma incremental e versionada. Isso garante que as atualizações do banco de dados sejam confiáveis, repetíveis e sem erros, evitando inconsistências e facilitando a implantação de novas versões de sistemas.</p>
                                `
                            },
                            {
                                id: 7,
                                title: 'Mensageria (RabbitMQ, Kafka)',
                                icon: '📨', // Ícone de mensagem
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Mensageria:</strong> É um padrão de comunicação assíncrona entre diferentes componentes de um sistema, utilizando filas de mensagens. No TJPE, a mensageria é essencial para desacoplar sistemas e garantir que operações que não precisam ser processadas em tempo real (como a indexação de documentos, envio de notificações ou geração de relatórios complexos) sejam executadas de forma eficiente em segundo plano. Isso melhora a responsividade dos sistemas e a robustez da arquitetura.</p>
                                    <p><strong>RabbitMQ:</strong> É um software de mensageria (Message Broker) open source que implementa o protocolo AMQP (Advanced Message Queuing Protocol). No TJPE, o RabbitMQ pode ser usado para gerenciar filas de mensagens, garantindo que tarefas como o envio de intimações eletrônicas ou a atualização de status de processos sejam processadas de forma confiável, mesmo em caso de picos de demanda. Ele assegura que as mensagens não se percam e sejam entregues aos consumidores corretos, promovendo a robustez das integrações.</p>
                                    <p><strong>Kafka:</strong> É uma plataforma de streaming de eventos distribuída, de alto desempenho, utilizada para construir pipelines de dados em tempo real e aplicações de streaming. No TJPE, o Kafka pode ser empregado para capturar e processar grandes volumes de eventos em tempo real, como o registro de cada atualização em um processo judicial ou o log de acessos aos sistemas. Isso permite análises em tempo real, auditoria contínua e a criação de soluções que reagem imediatamente a mudanças, potencializando a inteligência operacional do tribunal.</p>
                                `
                            },
                            {
                                id: 8,
                                title: 'Containers (Docker), Orquestração (Kubernetes), Rancher e Git',
                                icon: '🐳', // Ícone de Docker/Contêiner
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Containers (Docker):</strong> Containers são pacotes de software padronizados que incluem tudo o que é necessário para um aplicativo ser executado: código, runtime, ferramentas de sistema, bibliotecas, etc. Docker é a plataforma mais popular para criar e gerenciar containers. No TJPE, usar Docker para empacotar aplicações como microsserviços ou sistemas legados permite que eles sejam executados de forma consistente em qualquer ambiente (desenvolvimento, teste, produção), eliminando problemas de "funciona na minha máquina". Isso agiliza a implantação e garante a portabilidade das aplicações do tribunal.</p>
                                    <p><strong>Orquestração (Kubernetes):</strong> Kubernetes é um sistema de orquestração de containers open source que automatiza a implantação, escalonamento e gerenciamento de aplicações em containers. No TJPE, o Kubernetes é fundamental para gerenciar um grande número de microsserviços implantados em nuvem ou em infraestrutura própria, garantindo que as aplicações estejam sempre disponíveis, balanceadas e capazes de escalar conforme a demanda. Ele lida com a complexidade de manter os sistemas funcionando de forma robusta e eficiente.</p>
                                    <p><strong>Rancher:</strong> É uma plataforma de gerenciamento de containers que simplifica a implantação e o gerenciamento de clusters Kubernetes. No TJPE, o Rancher pode fornecer uma interface gráfica intuitiva para que as equipes de TI gerenciem múltiplos clusters Kubernetes, monitorem o desempenho das aplicações em containers e implementem políticas de segurança. Ele reduz a curva de aprendizado e a complexidade de operar ambientes Kubernetes, acelerando a adoção de tecnologias de containerização.</p>
                                    <p><strong>Git:</strong> (Já abordado na Missão 4) É um sistema de controle de versão distribuído, crucial para o gerenciamento colaborativo do código-fonte dos sistemas do TJPE. Sua menção aqui reforça sua importância na cadeia de ferramentas que suportam o desenvolvimento e a implantação de aplicações containerizadas, garantindo que as versões do código estejam sempre sincronizadas com as versões dos containers.</p>
                                `
                            },
                            {
                                id: 9,
                                title: 'Continuous Delivery (CD) e Continuous Integration (CI)',
                                icon: '🔄', // Ícone de ciclo/atualização
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Continuous Delivery (CD):</strong> É uma extensão da Integração Contínua (CI) onde o código é sempre mantido em um estado que pode ser liberado para produção a qualquer momento, embora a liberação real possa ser manual. No TJPE, o Continuous Delivery significa que as atualizações dos sistemas judiciais estão sempre prontas para serem implantadas, garantindo que correções de bugs ou novas funcionalidades possam ser disponibilizadas rapidamente aos usuários, sem grandes esforços manuais. Isso melhora a agilidade e a capacidade de resposta do tribunal às demandas.</p>
                                    <p><strong>Continuous Integration (CI):</strong> (Já abordado na Missão 4) É a prática de integrar as alterações de código dos desenvolvedores em um repositório central várias vezes ao dia. Cada integração é verificada por um build automatizado, incluindo testes, para detectar erros de integração o mais cedo possível. No TJPE, a Integração Contínua é essencial para garantir a qualidade e a estabilidade dos sistemas em desenvolvimento, permitindo que as equipes colaborem de forma eficiente e identifiquem problemas antes que se tornem maiores.</p>
                                `
                            },
                            {
                                id: 10,
                                title: 'Serviços de Autenticação: SSO Single Sign-On; Keycloak, Protocolo OAuth2 (RFC 6749)',
                                icon: '🔐', // Ícone de cadeado/segurança
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Serviços de autenticação:</strong> São sistemas responsáveis por verificar a identidade de um usuário ou serviço que tenta acessar um recurso. No TJPE, onde a segurança e a confidencialidade das informações são primordiais, os serviços de autenticação garantem que apenas usuários autorizados (magistrados, servidores, advogados) possam acessar os sistemas e dados judiciais, protegendo a integridade dos processos e a privacidade das informações.</p>
                                    <p><strong>SSO Single Sign-On:</strong> É um método de autenticação que permite que um usuário faça login com um único conjunto de credenciais para acessar múltiplos sistemas ou aplicações. No TJPE, o SSO simplifica a experiência do usuário, eliminando a necessidade de múltiplos logins para diferentes sistemas (PJe, sistemas de RH, portal de certidões), o que aumenta a produtividade e a segurança, reduzindo a fadiga de senhas e riscos associados.</p>
                                    <p><strong>Keycloak:</strong> É uma solução open source de gerenciamento de identidade e acesso que oferece Single Sign-On, autenticação forte e gerenciamento de usuários. No TJPE, o Keycloak pode ser implementado como a plataforma central para gerenciar a autenticação e autorização de todos os sistemas e serviços do tribunal. Ele proporciona uma camada de segurança robusta, flexível e centralizada, garantindo que o acesso seja seguro e auditável, e facilitando a integração com novas aplicações.</p>
                                    <p><strong>Protocolo OAuth2 (RFC 6749):</strong> É um protocolo de autorização que permite que uma aplicação obtenha acesso limitado a recursos de um usuário em um servidor HTTP, sem expor as credenciais do usuário. No TJPE, o OAuth2 é fundamental para permitir integrações seguras entre sistemas internos e externos (ex: um sistema de um parceiro acessando dados públicos de processos), garantindo que apenas as permissões necessárias sejam concedidas e que as informações sensíveis estejam protegidas, sem a necessidade de compartilhar senhas.</p>
                                `
                            },
                            {
                                id: 11,
                                title: 'Webhook e APIs Reversas',
                                icon: '↩️', // Ícone de retorno/callback
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Webhook:</strong> É um método de um aplicativo para fornecer informações em tempo real a outros aplicativos. Basicamente, é uma "chamada HTTP" que é acionada por um evento em um sistema e enviada para outro sistema, agindo como uma notificação. No TJPE, webhooks podem ser usados para notificar automaticamente outros sistemas ou usuários sobre eventos importantes, como a mudança de status de um processo, a inclusão de um novo documento ou a publicação de uma decisão, permitindo a automação e a integração assíncrona de fluxos de trabalho.</p>
                                    <p><strong>APIs Reversas:</strong> Embora o termo "APIs reversas" não seja um conceito padrão da mesma forma que APIs RESTful, ele pode se referir a cenários onde um sistema atua como cliente consumindo serviços de outros sistemas que não foram originalmente projetados para essa interação direta, ou em um contexto de Webhooks, onde o servidor do TJPE expõe um endpoint para receber notificações de outros sistemas. No contexto geral de sistemas distribuídos do TJPE, "APIs reversas" implicaria em mecanismos onde o tribunal precisa buscar ou reagir a eventos de sistemas externos que não têm um canal de comunicação proativo, sendo o webhook um exemplo comum dessa necessidade de "inversão" de fluxo de comunicação para eventos.</p>
                                `
                            }
                        ];
                        break;
                    case '3':
                        context = `No Tribunal de Justiça de Pernambuco (TJPE), a gestão e a persistência de dados são o cerne de todas as operações, desde o registro de novos processos até a consulta de históricos jurídicos complexos. Esta fase aborda os fundamentos da **modelagem de dados** – que define como as informações são estruturadas –, a importância da **normalização** para garantir a integridade e a eficiência do banco de dados, e as **linguagens** essenciais para interagir e controlar esses dados. Exploraremos também os **principais bancos de dados** utilizados no mercado e as estratégias de **integração com aplicações**, que permitem que os sistemas do tribunal acessem e manipulem as informações de forma segura e performática, assegurando a confiabilidade e a disponibilidade dos registros judiciais.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Modelagem de Dados: conceitual, lógica e física',
                                icon: '📋', // Ícone de lista/documento
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Modelagem de dados conceitual:</strong> É a primeira etapa na criação de um banco de dados, focando na representação de alto nível das informações, sem se preocupar com os detalhes técnicos de implementação. No TJPE, isso envolveria identificar as principais entidades como "Processo", "Parte", "Advogado", "Juiz" e os relacionamentos entre elas (ex: "Processo tem Parte", "Juiz atua em Processo"). O objetivo é criar um mapa claro e compreensível do domínio do negócio.</p>
                                    <p><strong>Modelagem de dados lógica:</strong> Traduz o modelo conceitual em uma estrutura mais detalhada que pode ser implementada em um sistema de gerenciamento de banco de dados (SGBD) específico, mas ainda independente de um software ou tecnologia particular (ex: Oracle, PostgreSQL). Inclui a definição de tabelas, colunas, chaves primárias e estrangeiras, e a aplicação de regras de normalização. Para o TJPE, esta etapa garantiria que a estrutura de dados para o PJe seja bem definida e otimizada, refletindo as regras de negócio do tribunal de forma consistente.</p>
                                    <p><strong>Modelagem de dados física:</strong> É a representação mais detalhada do banco de dados, considerando o SGBD específico e a infraestrutura tecnológica. Inclui a definição de tipos de dados exatos, índices, restrições de armazenamento, partições e outras otimizações de desempenho. No TJPE, a modelagem física seria crucial para garantir que os bancos de dados do tribunal (como os que suportam o PJe ou sistemas de gestão de sentenças) sejam altamente performáticos, seguros e capazes de lidar com o volume massivo de dados e acessos, garantindo a agilidade na resposta judicial.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Normalização e integridade referencial',
                                icon: '⚖️', // Ícone de balança/equilíbrio
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Normalização:</strong> É um processo de organização dos campos e tabelas de um banco de dados relacional para minimizar a redundância de dados e melhorar a integridade dos dados. Envolve uma série de "formas normais" (1FN, 2FN, 3FN, BCNF, etc.). No TJPE, a normalização é fundamental para garantir que os dados de processos, partes e documentos sejam armazenados de forma eficiente, sem duplicação desnecessária e com consistência. Isso evita anomalias em inserções, atualizações e exclusões, tornando o banco de dados mais confiável e performático para as operações judiciais.</p>
                                    <p><strong>Integridade referencial:</strong> É uma propriedade dos bancos de dados relacionais que garante que as relações entre as tabelas sejam mantidas consistentes. Isso significa que, se uma tabela referencia dados em outra tabela (por meio de chaves estrangeiras), essa referência deve sempre apontar para dados existentes. No TJPE, a integridade referencial é vital para a consistência dos dados do processo judicial. Por exemplo, uma petição eletrônica deve sempre estar associada a um processo existente, e uma parte deve estar ligada a um registro de processo válido. Isso impede a criação de dados órfãos ou inconsistentes, protegendo a validade e a confiabilidade das informações jurídicas.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'Linguagens de definição, manipulação, controle e transação de dados',
                                icon: '💬', // Ícone de balão de fala/linguagem
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Linguagens de definição de dados (DDL - Data Definition Language):</strong> São usadas para definir e gerenciar a estrutura do banco de dados, incluindo a criação, alteração e exclusão de objetos de banco de dados como tabelas, índices, visões e esquemas. Comandos comuns incluem CREATE TABLE, ALTER TABLE, DROP TABLE. No TJPE, a DDL é utilizada pelas equipes de desenvolvimento e DBA para criar e manter a estrutura dos bancos de dados que suportam os sistemas judiciais, garantindo que os dados possam ser armazenados e organizados de forma eficaz.</p>
                                    <p><strong>Linguagens de manipulação de dados (DML - Data Manipulation Language):</strong> São utilizadas para manipular os dados dentro das tabelas, como inserção, atualização, exclusão e consulta de registros. Comandos comuns incluem INSERT, UPDATE, DELETE, SELECT. Para o TJPE, a DML é a base para as operações diárias dos sistemas, permitindo que processos sejam registrados, informações de partes sejam atualizadas, documentos sejam anexados e consultas sobre o andamento de processos sejam realizadas. É a linguagem que as aplicações utilizam para interagir com os dados.</p>
                                    <p><strong>Linguagens de controle de dados (DCL - Data Control Language):</strong> São usadas para gerenciar permissões de acesso e segurança no banco de dados, controlando quem pode acessar o quê e quais operações podem ser realizadas. Comandos comuns incluem GRANT (conceder permissões) e REVOKE (revogar permissões). No TJPE, a DCL é crítica para garantir a segurança e a conformidade com a LGPD, controlando rigorosamente o acesso a dados sensíveis de processos e informações pessoais, assegurando que apenas usuários autorizados tenham as permissões necessárias para suas funções.</p>
                                    <p><strong>Linguagens de transação de dados (TCL - Transaction Control Language):</strong> São usadas para gerenciar transações de banco de dados, garantindo a atomicidade, consistência, isolamento e durabilidade (ACID) das operações. Comandos comuns incluem COMMIT (finalizar transação e salvar mudanças), ROLLBACK (desfazer mudanças) e SAVEPOINT (definir um ponto de retorno). No TJPE, a TCL é essencial para garantir a integridade das operações que envolvem múltiplas alterações em dados críticos, como a atualização de um processo que envolve mudanças em várias tabelas, assegurando que todas as operações sejam bem-sucedidas ou nenhuma delas seja aplicada, evitando inconsistências.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'PostgreSQL, Oracle DB (PL/SQL), MySQL/MariaDB, H2 Database e MongoDB',
                                icon: '🗄️', // Ícone de banco de dados
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>PostgreSQL:</strong> É um poderoso sistema de gerenciamento de banco de dados objeto-relacional (SGBDOR) de código aberto, conhecido por sua robustez, extensibilidade e conformidade com padrões SQL. No TJPE, o PostgreSQL pode ser uma escolha sólida para sistemas que demandam alta confiabilidade, grandes volumes de dados e funcionalidades avançadas de banco de dados, oferecendo uma alternativa de baixo custo e alta performance para gerenciar informações judiciais.</p>
                                    <p><strong>Oracle DB (PL/SQL):</strong> Oracle Database é um SGBD relacional proprietário amplamente utilizado em ambientes corporativos e governamentais de grande porte, conhecido por sua robustez, segurança e escalabilidade. PL/SQL é a linguagem procedimental da Oracle, que estende o SQL para permitir a programação de blocos de código, funções e procedimentos armazenados. No TJPE, é provável que sistemas legados ou de alta criticidade utilizem Oracle DB, aproveitando sua capacidade de lidar com enormes volumes de transações e dados com segurança.</p>
                                    <p><strong>MySQL/MariaDB:</strong> MySQL é um popular SGBD relacional de código aberto, conhecido por sua velocidade e facilidade de uso, enquanto MariaDB é um fork compatível e melhorado do MySQL. No TJPE, esses bancos de dados podem ser utilizados para aplicações menos críticas ou para sistemas com um volume menor de dados, oferecendo uma solução leve e eficiente para gerenciamento de informações administrativas ou de suporte.</p>
                                    <p><strong>H2 Database:</strong> É um SGBD relacional de código aberto escrito em Java, que pode ser executado em modo embarcado (dentro da aplicação) ou em modo servidor. É leve e ideal para testes de desenvolvimento, prototipagem ou aplicações pequenas que não exigem um SGBD robusto. No TJPE, o H2 pode ser usado em ambientes de desenvolvimento e teste para agilizar a criação e validação de funcionalidades sem a necessidade de configurar um banco de dados externo completo.</p>
                                    <p><strong>MongoDB:</strong> É um banco de dados NoSQL (Not Only SQL) orientado a documentos, que armazena dados em formato BSON (binário JSON) flexível. É ideal para dados não estruturados ou semiestruturados e para aplicações que exigem alta escalabilidade e flexibilidade de esquema. No TJPE, o MongoDB pode ser considerado para gerenciar grandes volumes de documentos eletrônicos, logs de auditoria ou dados de mídias, onde a estrutura dos dados pode variar e a performance em leitura e escrita é crucial.</p>
                                `
                            },
                            {
                                id: 5,
                                title: 'Integração com Aplicações: Conexão via JDBC/ODBC e ORM (Hibernate, JPA)',
                                icon: '🔌', // Ícone de plug/conexão
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Integração com Aplicações: Conexão via JDBC/ODBC:</strong> JDBC (Java Database Connectivity) é uma API padrão Java para conectar aplicações Java a bancos de dados. ODBC (Open Database Connectivity) é uma API padrão para conectar aplicações a bancos de dados independentemente do SGBD. No TJPE, essas tecnologias são a base para que os sistemas desenvolvidos em diversas linguagens possam se comunicar com os diferentes bancos de dados do tribunal, permitindo que as aplicações acessem, manipulem e consultem dados de forma programática.</p>
                                    <p><strong>Integração com Aplicações: Conexão via ORM (Hibernate, JPA):</strong> ORM (Object-Relational Mapping) é uma técnica de programação que mapeia objetos de uma linguagem de programação (ex: Java) para as tabelas e linhas de um banco de dados relacional. Ferramentas como Hibernate (implementação) e JPA (especificação) abstraem a complexidade do SQL, permitindo que os desenvolvedores trabalhem com objetos. No TJPE, o uso de ORM em sistemas como o PJe acelera o desenvolvimento, reduz a quantidade de código SQL manual e melhora a manutenibilidade, pois as interações com o banco de dados são feitas através de objetos, tornando o desenvolvimento mais intuitivo e menos propenso a erros.</p>
                                `
                            }
                        ];
                        break;
                    case '4':
                        context = `No Tribunal de Justiça de Pernambuco (TJPE), a aplicação de **Ciências de Dados, Business Intelligence (BI) e Analytics** é um diferencial estratégico para aprimorar a gestão judiciária e a prestação de serviços. Esta fase aborda como transformar grandes volumes de informações (desde o andamento de processos até dados de produtividade) em *insights* acionáveis. Isso envolve desde os **fundamentos da ciência de dados**, passando pela **ética e privacidade** (cruciais para dados públicos sensíveis), a **estatística aplicada** para interpretar padrões, o uso de **ferramentas de BI e visualização** (como Power BI e Metabase) para criar **dashboards interativos**, até as **boas práticas de storytelling com dados** para comunicar descobertas de forma eficaz. Além disso, explora a **engenharia de dados** para construir a infraestrutura necessária para o armazenamento e processamento de **Big Data**, garantindo que o TJPE possa tomar decisões baseadas em evidências e otimizar continuamente suas operações.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Fundamentos e Conceitos da Ciência de Dados',
                                icon: '📚', // Ícone de livros
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Fundamentos e Conceitos da Ciência de Dados:</strong> A Ciência de Dados é um campo interdisciplinar que utiliza métodos científicos, processos, algoritmos e sistemas para extrair conhecimento e *insights* de dados estruturados e não estruturados. No TJPE, isso significa aplicar técnicas para entender melhor o fluxo de processos, identificar padrões em decisões judiciais, prever demandas de serviços e otimizar recursos. Compreender esses fundamentos é o primeiro passo para transformar a vasta quantidade de informações jurídicas em inteligência acionável, apoiando a gestão e a melhoria contínua dos serviços do tribunal.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Ética e privacidade no uso de dados públicos',
                                icon: '🔒', // Ícone de cadeado
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Ética e privacidade no uso de dados públicos:</strong> No TJPE, a ética e a privacidade no uso de dados públicos são de suma importância, especialmente com a Lei Geral de Proteção de Dados (LGPD). Envolvem a responsabilidade de coletar, armazenar, processar e compartilhar informações de forma transparente, segura e com o consentimento adequado, quando necessário. Ao lidar com dados de processos judiciais e informações pessoais de cidadãos, o tribunal deve assegurar que a análise de dados e a geração de *insights* não violem direitos individuais, mantendo a confidencialidade e a segurança das informações. A conformidade com as regulamentações e a adoção de boas práticas éticas são essenciais para manter a confiança da sociedade no sistema judiciário.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'Estatística Aplicada (Estatística descritiva e inferencial, Probabilidade e distribuições, Correlação, regressão e testes de hipóteses)',
                                icon: '📊', // Ícone de gráfico de barras
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Estatística descritiva e inferencial:</strong> A estatística descritiva é usada para resumir e descrever as características de um conjunto de dados (ex: média de duração de um tipo de processo, número de decisões por juiz). A estatística inferencial permite tirar conclusões e fazer previsões sobre uma população maior a partir de uma amostra (ex: prever a demanda de novos processos). No TJPE, compreender esses conceitos ajuda a avaliar riscos, modelar o comportamento de processos e eventos judiciais, e otimizar a alocação de recursos de forma mais eficaz.</p>
                                    <p><strong>Probabilidade e distribuições:</strong> A teoria da probabilidade lida com a chance de ocorrência de eventos, e as distribuições de probabilidade descrevem como os valores de uma variável se espalham (ex: distribuição do tempo de julgamento, probabilidade de sucesso em um recurso). No TJPE, compreender esses conceitos ajuda a avaliar riscos, modelar o comportamento de processos e eventos judiciais, e otimizar a alocação de recursos de forma mais eficaz.</p>
                                    <p><strong>Correlação:</strong> A correlação mede a força e a direção da relação linear entre duas variáveis (ex: se o aumento no número de advogados se correlaciona com o aumento de processos em uma vara específica). No TJPE, identificar correlações pode revelar insights sobre fatores que influenciam a celeridade processual ou a produtividade dos setores, orientando estratégias de melhoria.</p>
                                    <p><strong>Regressão:</strong> A regressão é uma técnica estatística usada para modelar a relação entre uma variável dependente e uma ou mais variáveis independentes, permitindo fazer previsões. No TJPE, a regressão pode ser aplicada para prever a carga de trabalho futura com base em fatores históricos, ou para entender como diferentes variáveis (ex: número de servidores, tipo de matéria) impactam o tempo de conclusão de um processo, auxiliando no planejamento estratégico.</p>
                                    <p><strong>Testes de hipóteses:</strong> São métodos estatísticos usados para tomar decisões sobre uma população com base em dados de amostra. Permitem verificar se uma suposição (hipótese) sobre os dados é plausível ou se há evidências estatísticas para rejeitá-la (ex: testar se uma nova metodologia de trabalho realmente reduziu o tempo médio de tramitação de processos). No TJPE, testes de hipóteses validam a eficácia de novas políticas ou sistemas, garantindo que as mudanças implementadas gerem o impacto desejado.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'Ferramentas de BI e Visualização de Dados (Power BI e Metabase)',
                                icon: '📈', // Ícone de gráfico de tendência
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Ferramentas de BI:</strong> As ferramentas de Business Intelligence (BI) são softwares que coletam, processam e apresentam dados de forma que suportem a tomada de decisão. Elas transformam dados brutos em informações compreensíveis, como dashboards e relatórios. No TJPE, as ferramentas de BI são essenciais para monitorar indicadores de desempenho (KPIs) da justiça, como tempo médio de julgamento, taxa de congestionamento, ou volume de processos por vara, permitindo uma gestão mais proativa e baseada em dados.</p>
                                    <p><strong>Visualização de Dados: Power BI:</strong> Power BI é uma ferramenta de BI da Microsoft que permite criar relatórios e dashboards interativos a partir de diversas fontes de dados. No TJPE, o Power BI pode ser utilizado para desenvolver painéis visuais para magistrados e gestores, apresentando o panorama do desempenho judicial, a produtividade das equipes ou a distribuição de processos. A capacidade de criar visualizações ricas e explorar dados de forma intuitiva é crucial para comunicar *insights* complexos de maneira clara.</p>
                                    <p><strong>Visualização de Dados: Metabase:</strong> Metabase é uma ferramenta de BI de código aberto que permite criar dashboards e gráficos a partir de dados em bancos de dados. É conhecida por sua facilidade de uso, permitindo que usuários com menos conhecimento técnico explorem os dados por si mesmos. No TJPE, o Metabase pode democratizar o acesso à informação, permitindo que servidores e equipes de gestão criem suas próprias consultas e visualizações para atender a necessidades específicas, promovendo a cultura de dados em todo o tribunal.</p>
                                `
                            },
                            {
                                id: 5,
                                title: 'Criação de dashboards e relatórios interativos',
                                icon: '🖼️', // Ícone de moldura/tela
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Criação de dashboards:</strong> Dashboards são painéis visuais que exibem os principais indicadores de desempenho (KPIs) e métricas relevantes para um objetivo específico, em tempo real ou com atualizações frequentes. No TJPE, dashboards são fundamentais para monitorar a eficiência da justiça, apresentando informações como o número de processos pendentes, a taxa de cumprimento de metas, ou a distribuição da carga de trabalho. Eles permitem que magistrados e gestores tenham uma visão rápida e clara da situação, facilitando a identificação de problemas e a tomada de decisões ágeis.</p>
                                    <p><strong>Relatórios interativos:</strong> Relatórios interativos permitem que os usuários explorem os dados de forma dinâmica, aplicando filtros, drill-downs e diferentes visualizações para obter *insights* mais profundos. Diferente de relatórios estáticos, eles oferecem flexibilidade para que o usuário formule suas próprias perguntas e encontre respostas nos dados. No TJPE, relatórios interativos podem ser usados para analisar detalhadamente o perfil dos processos, o desempenho de diferentes varas ou a eficácia de novas políticas, permitindo uma investigação mais aprofundada dos dados para melhorar a gestão judicial.</p>
                                `
                            },
                            {
                                id: 6,
                                title: 'Boas práticas de visualização e storytelling com dados',
                                icon: '💡', // Ícone de lâmpada/ideia
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Boas práticas de visualização:</strong> Referem-se a princípios e diretrizes para criar gráficos e dashboards que sejam claros, precisos e eficazes na comunicação de dados. Isso inclui escolher o tipo de gráfico correto para cada dado, usar cores de forma consistente e significativa, evitar a poluição visual, e garantir a legibilidade. No TJPE, seguir boas práticas de visualização é crucial para que os relatórios de desempenho e os painéis de controle sejam facilmente compreendidos por todos os usuários, desde os gestores até o público externo (em dados de transparência), garantindo que as informações sobre a justiça sejam claras e impactantes.</p>
                                    <p><strong>Storytelling com dados:</strong> É a arte de construir uma narrativa envolvente em torno dos dados, usando visualizações e texto para explicar o que os dados significam, por que são importantes e o que pode ser feito a partir deles. No TJPE, o storytelling com dados pode ser aplicado para apresentar os resultados de análises complexas sobre a eficiência judicial, o impacto de novas legislações ou a necessidade de alocação de recursos. Ao invés de apenas mostrar números e gráficos, a narrativa ajuda a contextualizar os *insights*, tornando-os mais persuasivos e compreensíveis para diferentes públicos, incluindo a alta administração e a sociedade.</p>
                                `
                            },
                            {
                                id: 7,
                                title: 'Linguagens e Tecnologias para Análise de Dados: Python (pandas, numpy, matplotlib, seaborn) e SQL para análise e extração de dados',
                                icon: '🐍', // Ícone de Python
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Python (pandas, numpy, matplotlib, seaborn):</strong> Python é uma linguagem de programação versátil e popular para a ciência de dados, amplamente utilizada devido à sua sintaxe simples e vasta gama de bibliotecas. No TJPE, Python pode ser empregado para tarefas como a automação da coleta e limpeza de dados de processos (pandas), a realização de cálculos numéricos complexos (numpy), e a criação de visualizações avançadas de dados para relatórios e análises (matplotlib e seaborn). Essas bibliotecas permitem que os analistas de dados do tribunal explorem, transformem e visualizem grandes volumes de dados de forma eficiente, extraindo *insights* valiosos para a gestão judicial.</p>
                                    <p><strong>SQL para análise e extração de dados:</strong> SQL (Structured Query Language) é a linguagem padrão para gerenciar e manipular bancos de dados relacionais. No TJPE, o SQL é essencial para a extração direta de dados dos sistemas do tribunal, permitindo que os analistas recuperem informações específicas sobre processos, partes, sentenças e outros registros. A habilidade de escrever consultas SQL complexas é crucial para acessar as fontes de dados primárias, realizar agregações e filtros, e preparar os dados para análises mais aprofundadas em outras ferramentas, garantindo que as decisões sejam baseadas em informações precisas e atualizadas.</p>
                                `
                            },
                            {
                                id: 8,
                                title: 'Engenharia de Dados: ETL: conceitos e ferramentas, Armazenamento e processamento de grandes volumes de dados (Big Data), Data Lakes e Data Warehouses',
                                icon: '🏗️', // Ícone de engenharia
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Engenharia de Dados: ETL: conceitos e ferramentas:</strong> ETL (Extract, Transform, Load) é um processo fundamental na engenharia de dados que envolve a extração de dados de diversas fontes, sua transformação (limpeza, padronização, agregação) para um formato adequado, e o carregamento para um destino final (ex: data warehouse). No TJPE, o ETL é crucial para consolidar informações de diferentes sistemas (PJe, sistemas administrativos, RH) em um único ambiente analítico, garantindo que os dados estejam prontos para análises de BI e Ciência de Dados. Ferramentas de ETL automatizam esse processo complexo, assegurando a qualidade e a consistência dos dados para a tomada de decisão.</p>
                                    <p><strong>Armazenamento e processamento de grandes volumes de dados (Big Data):</strong> Big Data refere-se a conjuntos de dados tão grandes e complexos que os métodos tradicionais de processamento de dados não são suficientes. No TJPE, com o crescente volume de processos, documentos e informações geradas diariamente, lidar com Big Data envolve o uso de tecnologias e infraestruturas escaláveis para armazenar e processar essas informações de forma eficiente, permitindo análises complexas e em tempo real para otimizar as operações judiciais e identificar novas tendências.</p>
                                    <p><strong>Data Lakes:</strong> É um repositório centralizado que armazena grandes quantidades de dados brutos em seu formato nativo (estruturados, semiestruturados ou não estruturados), sem a necessidade de um esquema predefinido. No TJPE, um Data Lake pode ser utilizado para armazenar todos os tipos de dados gerados pelos sistemas (textos de processos, áudios de audiências, logs de acesso), permitindo que sejam explorados posteriormente para diferentes fins analíticos ou para o desenvolvimento de modelos de Machine Learning, oferecendo flexibilidade e escalabilidade para futuras análises.</p>
                                    <p><strong>Data Warehouses:</strong> É um sistema de armazenamento de dados otimizado para consultas e relatórios, geralmente contendo dados estruturados e previamente transformados de diversas fontes operacionais. Diferente de um Data Lake, os dados em um Data Warehouse são organizados para suportar análises de BI e tomada de decisão estratégica. No TJPE, um Data Warehouse seria essencial para fornecer dados consolidados e consistentes para relatórios gerenciais sobre o desempenho do tribunal, a produtividade das varas ou a efetividade de programas judiciais, permitindo uma visão unificada e estratégica das operações.</p>
                                `
                            },
                            {
                                id: 9,
                                title: 'Governança e Qualidade de Dados (Catálogo de dados, Qualidade, integridade e consistência dos dados)',
                                icon: '🛡️', // Ícone de escudo
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Governança:</strong> Refere-se ao conjunto de processos, políticas, padrões, métricas e papéis que asseguram o uso eficaz e a gestão dos dados dentro de uma organização. No TJPE, a governança de dados é crucial para garantir que as informações judiciais sejam confiáveis, seguras, acessíveis e em conformidade com as regulamentações (como LGPD). Ela estabelece responsabilidades, define padrões de qualidade e promove a cultura de dados em todo o tribunal, otimizando o valor dos dados como um ativo estratégico.</p>
                                    <p><strong>Qualidade de Dados:</strong> Diz respeito à condição dos dados em relação à sua utilidade para um propósito específico, considerando aspectos como precisão, completude, consistência, pontualidade e validade. No TJPE, a qualidade dos dados é fundamental para a credibilidade das informações processuais e a confiabilidade das decisões judiciais. Dados de baixa qualidade podem levar a erros operacionais, análises incorretas e decisões equivocadas, comprometendo a eficiência e a reputação do tribunal.</p>
                                    <p><strong>Catálogo de dados:</strong> É um inventário organizado de todos os ativos de dados de uma organização, fornecendo metadados (dados sobre os dados) para ajudar os usuários a descobrir e entender as informações disponíveis. No TJPE, um catálogo de dados seria uma ferramenta valiosa para que os profissionais de TI e os usuários de negócio localizem facilmente quais dados estão disponíveis, de onde vêm, quem é o responsável, e qual sua relevância, acelerando o processo de análise e garantindo o uso correto das informações.</p>
                                    <p><strong>Integridade:</strong> A integridade dos dados refere-se à exatidão e consistência dos dados ao longo de todo o seu ciclo de vida. Garante que os dados não foram alterados ou corrompidos, e que eles são válidos e completos. No TJPE, a integridade dos dados é essencial para a veracidade dos registros processuais e a segurança das informações sensíveis, evitando inconsistências que poderiam levar a erros ou fraudes.</p>
                                    <p><strong>Consistência dos dados:</strong> Refere-se à uniformidade e conformidade dos dados com regras e padrões predefinidos, garantindo que as informações em diferentes sistemas ou partes do mesmo sistema não se contradizem. No TJPE, a consistência dos dados é vital para a operação harmoniosa de diversos sistemas interligados (PJE, sistemas de intimação, sistemas de relatórios), assegurando que a mesma informação seja representada de forma idêntica em todos os lugares e que as análises sejam baseadas em um único e verdadeiro conjunto de dados.</p>
                                `
                            }
                        ];
                        break;
                    case '5':
                        context = `No Tribunal de Justiça de Pernambuco (TJPE), a **Inteligência Artificial (IA) e a Automação** estão se tornando pilares para a modernização e otimização dos serviços judiciais. Esta fase explora como a IA, desde seus **fundamentos** até a **IA Generativa**, pode transformar a maneira como o tribunal opera, automatizando tarefas repetitivas, auxiliando na análise de grandes volumes de documentos e oferecendo *insights* para a tomada de decisão. Abordaremos o **Aprendizado de Máquina (Machine Learning)** em suas diversas formas, a **avaliação de modelos** para garantir a precisão das soluções, o **Processamento de Linguagem Natural (NLP)** para interagir com textos jurídicos, a **Engenharia de Prompt e RAG** para otimizar a comunicação com IAs, e as **ferramentas e plataformas** que tornam tudo isso possível. Além disso, a fase destaca a importância da **ética e responsabilidade em IA**, e o papel da **Automação Robótica de Processos (RPA)** na otimização de fluxos de trabalho, garantindo que a tecnologia sirva à justiça de forma eficiente e justa.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Fundamentos de IA e IA Generativa',
                                icon: '🧠', // Ícone de cérebro
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Fundamentos de IA:</strong> A Inteligência Artificial (IA) é um campo da ciência da computação que busca criar máquinas capazes de simular a inteligência humana, como aprender, raciocinar, resolver problemas e compreender a linguagem. No TJPE, os fundamentos da IA são aplicados para desenvolver sistemas que podem automatizar a triagem de processos, auxiliar na pesquisa jurídica ou identificar padrões em grandes volumes de dados, liberando os servidores para tarefas mais complexas e estratégicas.</p>
                                    <p><strong>IA Generativa:</strong> É um ramo da IA que se concentra na criação de novos conteúdos, como texto, imagens, áudio ou vídeo, a partir de dados existentes. No TJPE, a IA Generativa pode ser utilizada para auxiliar na redação de minutas de documentos jurídicos, gerar resumos de processos extensos ou criar respostas padronizadas para perguntas frequentes de cidadãos, agilizando o trabalho e padronizando a comunicação, sempre sob supervisão humana para garantir a precisão e a conformidade legal.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Aprendizado de Máquina (Machine Learning): supervisionado, não supervisionado e por reforço, Principais algoritmos: regressão, Redes Neurais, SVM, k-NN e clustering',
                                icon: '🤖', // Ícone de robô
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Aprendizado de Máquina (Machine Learning):</strong> É um subcampo da IA que permite que os sistemas aprendam a partir de dados, identifiquem padrões e tomem decisões com mínima intervenção humana. No TJPE, o Machine Learning é fundamental para otimizar a gestão judicial, por exemplo, prevendo a duração de processos, identificando fraudes ou classificando documentos automaticamente, aumentando a eficiência e a capacidade analítica do tribunal.</p>
                                    <p><strong>Supervisionado:</strong> Tipo de aprendizado de máquina onde o modelo é treinado com um conjunto de dados que inclui tanto as entradas quanto as saídas desejadas (rótulos). No TJPE, um exemplo seria treinar um modelo para classificar o tipo de processo (cível, criminal) com base em dados históricos onde o tipo já é conhecido, ou prever o resultado de um recurso com base em decisões anteriores.</p>
                                    <p><strong>Não supervisionado:</strong> Tipo de aprendizado de máquina onde o modelo é treinado com dados sem rótulos, buscando encontrar padrões ou estruturas ocultas nos dados. No TJPE, isso pode ser usado para agrupar documentos semelhantes, identificar anomalias em logs de sistema (clustering) ou descobrir novos padrões em grandes volumes de dados de processos que não eram evidentes anteriormente, sem a necessidade de categorização manual prévia.</p>
                                    <p><strong>Por reforço:</strong> Tipo de aprendizado de máquina onde um agente aprende a tomar decisões em um ambiente para maximizar uma recompensa, por meio de tentativa e erro. Embora menos comum em aplicações diretas no TJPE, pode ser explorado em cenários de otimização de recursos ou agendamento de audiências, onde o sistema aprende a melhor estratégia para atingir um objetivo específico ao longo do tempo.</p>
                                    <p><strong>Algoritmo de regressão:</strong> Usado para prever um valor contínuo (numérico) com base em variáveis de entrada. No TJPE, pode ser aplicado para prever o tempo de duração de um processo com base em características como tipo de ação, número de partes e complexidade, auxiliando no planejamento e na gestão de expectativas.</p>
                                    <p><strong>Algoritmo de Redes Neurais:</strong> Inspiradas no cérebro humano, são modelos complexos capazes de aprender padrões e relações em grandes volumes de dados, sendo a base para o Deep Learning. No TJPE, redes neurais podem ser usadas para análise de texto em processos (identificação de temas, emoções), reconhecimento de padrões em imagens de documentos ou até mesmo para sistemas de recomendação para juízes sobre jurisprudência relevante.</p>
                                    <p><strong>Algoritmo de SVM (Support Vector Machine):</strong> É um algoritmo de classificação e regressão que busca encontrar o "hiperplano" ideal que melhor separa classes de dados. No TJPE, o SVM pode ser utilizado para classificar documentos jurídicos em categorias específicas, identificar processos com alta probabilidade de recurso ou separar casos de fraude de casos legítimos, com alta precisão.</p>
                                    <p><strong>Algoritmo de k-NN (k-Nearest Neighbors):</strong> É um algoritmo de classificação não-paramétrico que classifica um ponto de dados com base na maioria dos votos de seus "k" vizinhos mais próximos. No TJPE, o k-NN pode ser aplicado para recomendar jurisprudências semelhantes a um caso atual ou para classificar um novo processo com base em processos já existentes e categorizados, auxiliando na pesquisa e na padronização de decisões.</p>
                                    <p><strong>Algoritmo de clustering:</strong> É uma técnica de aprendizado não supervisionado que agrupa pontos de dados em clusters (agrupamentos) com base em sua similaridade. No TJPE, o clustering pode ser usado para identificar grupos de processos com características semelhantes que podem se beneficiar de um tratamento padronizado, ou para segmentar o perfil de usuários de sistemas para otimizar a experiência, revelando padrões ocultos nos dados.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'Avaliação de modelos: acurácia, precisão, recall, F1-score',
                                icon: '📈', // Ícone de gráfico
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>A acurácia:</strong> É a proporção de previsões corretas (tanto verdadeiros positivos quanto verdadeiros negativos) em relação ao total de previsões. No TJPE, se um modelo de IA classifica corretamente 95% dos processos como "cível" ou "criminal", sua acurácia é de 95%. É uma métrica geral de desempenho, mas pode ser enganosa em dados desbalanceados.</p>
                                    <p><strong>Precisão:</strong> É a proporção de verdadeiros positivos em relação a todos os resultados classificados como positivos (verdadeiros positivos + falsos positivos). No TJPE, se um modelo identifica 100 processos como "fraudulentos", e 90 deles são realmente fraudulentos, a precisão é de 90%. É importante quando o custo de um falso positivo é alto (ex: classificar um processo legítimo como fraudulento).</p>
                                    <p><strong>Recall:</strong> É a proporção de verdadeiros positivos em relação a todos os casos positivos reais (verdadeiros positivos + falsos negativos). No TJPE, se há 100 processos fraudulentos reais, e o modelo identifica 85 deles, o recall é de 85%. É importante quando o custo de um falso negativo é alto (ex: não identificar um processo fraudulento real).</p>
                                    <p><strong>F1-score:</strong> É a média harmônica da precisão e do recall, fornecendo um equilíbrio entre as duas métricas. É útil quando se busca um balanço entre a minimização de falsos positivos e falsos negativos, especialmente em conjuntos de dados desbalanceados. No TJPE, o F1-score pode ser usado para avaliar modelos de classificação de documentos onde tanto a identificação correta quanto a não identificação de documentos relevantes são importantes.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'Processamento de Linguagem Natural (NLP): Tokenização, stemming, lematização, Modelos de linguagem (TF-IDF, Word2Vec, transformers)',
                                icon: '🗣️', // Ícone de balão de fala
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Processamento de Linguagem Natural (NLP):</strong> É um campo da IA que permite que computadores compreendam, interpretem e gerem a linguagem humana. No TJPE, o NLP é crucial para analisar grandes volumes de textos jurídicos, como petições, sentenças e documentos processuais. Isso inclui tarefas como extração de informações-chave, classificação de documentos, sumarização de textos e até mesmo a identificação de temas e argumentos, agilizando a pesquisa e a gestão documental.</p>
                                    <p><strong>Tokenização:</strong> É o processo de dividir um texto em unidades menores, chamadas "tokens", que podem ser palavras, frases ou símbolos. No TJPE, ao analisar uma sentença, a tokenização separaria cada palavra, permitindo que o sistema processe e entenda o texto de forma estruturada para futuras análises de NLP.</p>
                                    <p><strong>Stemming:</strong> É o processo de reduzir palavras flexionadas (ou às vezes derivadas) à sua raiz ou "stem", que não precisa ser uma palavra real. Ex: "correndo", "corredor" -> "corr". No TJPE, o stemming pode ser usado para agrupar termos semelhantes em documentos jurídicos, mesmo que estejam em formas diferentes, facilitando a busca e a análise de conteúdo.</p>
                                    <p><strong>Lematização:</strong> É o processo de reduzir palavras flexionadas à sua forma base ou "lema", que é uma palavra real do dicionário. Ex: "melhores", "melhor" -> "bom". No TJPE, a lematização é mais precisa que o stemming para normalizar termos jurídicos, garantindo que "recursos" e "recorrer" sejam mapeados para "recurso", o que é vital para a precisão na pesquisa e classificação de documentos.</p>
                                    <p><strong>Modelos de linguagem TF-IDF:</strong> TF-IDF (Term Frequency-Inverse Document Frequency) é uma técnica estatística que reflete a importância de uma palavra em um documento em relação a uma coleção de documentos. No TJPE, o TF-IDF pode ser usado para identificar termos-chave em petições ou sentenças, ajudando a classificar documentos por assunto ou a encontrar documentos relevantes para um caso específico, destacando a relevância de termos únicos em um contexto jurídico.</p>
                                    <p><strong>Modelos de linguagem Word2Vec:</strong> É uma técnica de incorporação de palavras (word embedding) que representa palavras como vetores numéricos em um espaço multidimensional, onde palavras com significados semelhantes estão próximas. No TJPE, o Word2Vec pode ser aplicado para entender o contexto e a semântica de termos jurídicos, permitindo que o sistema encontre documentos ou jurisprudências que utilizam sinônimos ou conceitos relacionados, mesmo que as palavras exatas não estejam presentes, aprimorando a busca semântica.</p>
                                    <p><strong>Modelos de linguagem Transformers:</strong> São arquiteturas de rede neural que se tornaram a base para muitos modelos de NLP de última geração (como BERT, GPT). Eles são excelentes em capturar o contexto e as relações de longo alcance nas frases. No TJPE, modelos baseados em \`Transformers\` podem ser usados para tarefas complexas como sumarização automática de processos, tradução jurídica, análise de sentimentos em manifestações ou até mesmo para responder perguntas sobre o conteúdo de documentos legais, elevando a capacidade de compreensão e interação com a linguagem jurídica.</p>
                                `
                            },
                            {
                                id: 5,
                                title: 'Engenharia de Prompt e RAG (Retrieval Augmented Generation)',
                                icon: '💬', // Ícone de balão de fala/prompt
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Engenharia de Prompt:</strong> É a arte e a ciência de criar as entradas (prompts) mais eficazes para modelos de IA generativa, a fim de obter as saídas desejadas. No TJPE, a engenharia de prompt é crucial para que os servidores e magistrados possam extrair o máximo valor de ferramentas de IA, por exemplo, ao solicitar que a IA resuma um processo, elabore uma minuta de despacho ou responda a uma consulta jurídica. Um prompt bem elaborado garante respostas mais precisas, relevantes e úteis para as necessidades do tribunal.</p>
                                    <p><strong>RAG (Retrieval Augmented Generation):</strong> É uma técnica que combina a capacidade de geração de texto de modelos de linguagem grandes (LLMs) com a capacidade de recuperar informações de uma base de dados externa. Em vez de a IA responder apenas com base no que foi treinado, o RAG permite que ela busque informações relevantes em documentos específicos e as utilize para gerar uma resposta mais precisa e contextualizada. No TJPE, o RAG é extremamente valioso para que a IA possa responder perguntas sobre casos específicos, jurisprudências ou legislações, consultando a base de dados interna do tribunal em tempo real, garantindo que as respostas sejam factuais e baseadas em informações atualizadas e confiáveis.</p>
                                `
                            },
                            {
                                id: 6,
                                title: 'Ferramentas e Bibliotecas para IA: Python: scikit-learn, TensorFlow, Keras, PyTorch, NLP: spaCy, NLTK, Hugging Face Missão Transformers',
                                icon: '🛠️', // Ícone de ferramentas
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Python scikit-learn:</strong> É uma biblioteca Python popular e de código aberto para aprendizado de máquina, que oferece uma ampla gama de algoritmos para classificação, regressão, clustering, redução de dimensionalidade e pré-processamento de dados. No TJPE, o scikit-learn pode ser usado para desenvolver modelos preditivos simples, como a classificação de processos ou a análise de dados estatísticos de desempenho judicial.</p>
                                    <p><strong>Python TensorFlow:</strong> É uma biblioteca open source desenvolvida pelo Google para aprendizado de máquina e redes neurais, amplamente utilizada para Deep Learning. No TJPE, o TensorFlow pode ser empregado para construir e treinar modelos complexos de IA, como redes neurais para processamento de linguagem natural (análise de textos jurídicos) ou visão computacional (reconhecimento de padrões em documentos digitalizados), permitindo o desenvolvimento de soluções de IA de ponta.</p>
                                    <p><strong>Python Keras:</strong> É uma API de alto nível para construir e treinar modelos de Deep Learning, que pode ser executada sobre TensorFlow, PyTorch ou JAX. Keras simplifica o desenvolvimento de redes neurais, tornando-o mais acessível. No TJPE, Keras pode ser usado para prototipar rapidamente modelos de IA para tarefas como classificação de documentos ou sumarização de textos, acelerando o ciclo de desenvolvimento e experimentação.</p>
                                    <p><strong>PyTorch:</strong> É uma biblioteca de aprendizado de máquina open source baseada em Python, desenvolvida pelo Facebook (Meta), conhecida por sua flexibilidade e facilidade de uso em pesquisa e desenvolvimento de Deep Learning. No TJPE, PyTorch pode ser uma alternativa ao TensorFlow para construir modelos de IA, especialmente em projetos que exigem maior controle sobre o processo de treinamento e experimentação com novas arquiteturas de rede neural.</p>
                                    <p><strong>NLP spaCy:</strong> É uma biblioteca de Processamento de Linguagem Natural (NLP) em Python, projetada para ser rápida e eficiente em tarefas de NLP de nível de produção, como tokenização, reconhecimento de entidades nomeadas e análise de dependências. No TJPE, spaCy pode ser usado para pré-processar grandes volumes de textos jurídicos, extrair informações relevantes de documentos ou identificar entidades como nomes de pessoas, processos e datas, agilizando a análise e a organização de dados textuais.</p>
                                    <p><strong>NLTK:</strong> (Natural Language Toolkit) É uma biblioteca Python para NLP, muito utilizada para pesquisa e ensino. Oferece ferramentas para tokenização, stemming, lematização, parsing e muito mais. No TJPE, NLTK pode ser útil para experimentos iniciais com processamento de texto em documentos jurídicos, permitindo que os desenvolvedores explorem diferentes abordagens de NLP antes de aplicar soluções em larga escala.</p>
                                    <p><strong>Hugging Face:</strong> É uma empresa e plataforma que se tornou um hub para modelos de Machine Learning (especialmente NLP e IA Generativa), datasets e ferramentas. Sua biblioteca \`transformers\` é amplamente utilizada para modelos baseados em \`Transformers\`. No TJPE, a plataforma Hugging Face e suas ferramentas podem ser um recurso valioso para acessar e utilizar modelos pré-treinados de IA para tarefas como sumarização, tradução ou classificação de documentos jurídicos, acelerando a implementação de soluções de IA sem a necessidade de treinar modelos do zero.</p>
                                    <p><strong>Missão Transformers:</strong> Refere-se à biblioteca \`transformers\` da Hugging Face, que oferece implementações de modelos de última geração baseadas na arquitetura Transformer (como BERT, GPT, T5). No TJPE, esta biblioteca é fundamental para aplicar modelos avançados de NLP e IA Generativa em textos jurídicos, permitindo a criação de soluções como assistentes virtuais para pesquisa de jurisprudência, sumarizadores automáticos de decisões ou sistemas de geração de minutas, aproveitando o poder das IAs mais recentes.</p>
                                `
                            },
                            {
                                id: 7,
                                title: 'Modelos e plataformas de IA Gen: Chat-GPT, Claude, Amazon Bedrock, Google Vertex, Gemini, Llhama, Ollama e Deepseek',
                                icon: '🌐', // Ícone de rede/plataforma
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Chat-GPT:</strong> É um modelo de linguagem grande (LLM) desenvolvido pela OpenAI, conhecido por sua capacidade de gerar texto coerente e relevante em resposta a prompts. No TJPE, o Chat-GPT (ou modelos similares) pode auxiliar na redação de rascunhos de documentos, na sumarização de processos ou na criação de respostas para perguntas frequentes, agilizando o trabalho administrativo e de suporte.</p>
                                    <p><strong>Claude:</strong> É um modelo de linguagem grande desenvolvido pela Anthropic, focado em segurança e utilidade. Similar ao Chat-GPT, pode ser usado no TJPE para tarefas de geração de texto, sumarização e assistência na pesquisa jurídica, com ênfase em respostas mais seguras e menos propensas a "alucinações".</p>
                                    <p><strong>Amazon Bedrock:</strong> É um serviço da AWS que oferece acesso a uma variedade de modelos de IA generativa (incluindo modelos de terceiros e da Amazon) por meio de uma API unificada. No TJPE, o Amazon Bedrock pode ser uma plataforma para integrar diferentes capacidades de IA generativa em sistemas internos, permitindo que o tribunal experimente e utilize diversos modelos sem gerenciar a infraestrutura subjacente.</p>
                                    <p><strong>Google Vertex:</strong> É uma plataforma unificada de aprendizado de máquina do Google Cloud que permite construir, implantar e escalar modelos de ML. Inclui acesso a modelos de IA generativa do Google (como Gemini). No TJPE, o Google Vertex pode ser o ambiente para desenvolver e gerenciar soluções de IA personalizadas para as necessidades do tribunal, desde modelos de classificação de documentos até sistemas de recomendação de jurisprudência.</p>
                                    <p><strong>Gemini:</strong> É uma família de modelos de IA multimodal desenvolvida pelo Google, capaz de compreender e operar com texto, código, áudio, imagem e vídeo. No TJPE, o Gemini pode ter aplicações avançadas, como a análise de documentos digitalizados (texto e imagem), a transcrição e sumarização de audiências (áudio) e a geração de conteúdo multimídia para treinamento ou comunicação, oferecendo uma capacidade de IA mais abrangente.</p>
                                    <p><strong>Llama:</strong> (Large Language Model Meta AI) É uma família de LLMs de código aberto desenvolvida pela Meta (Facebook). Modelos como Llama 2 podem ser executados localmente ou em infraestruturas privadas. No TJPE, o Llama pode ser uma opção para desenvolver soluções de IA generativa com maior controle sobre os dados e a segurança, ideal para ambientes que exigem conformidade rigorosa e privacidade, permitindo personalização e ajuste fino para tarefas jurídicas específicas.</p>
                                    <p><strong>Ollama:</strong> É uma ferramenta que permite executar modelos de linguagem grandes (LLMs) localmente em seu computador. Simplifica o processo de download e execução de modelos como Llama. No TJPE, Ollama pode ser útil para equipes de pesquisa e desenvolvimento que desejam experimentar com LLMs de código aberto em um ambiente controlado e sem custos de nuvem, facilitando a prototipagem e a avaliação de modelos para uso interno.</p>
                                    <p><strong>Deepseek:</strong> É uma empresa de IA que desenvolve modelos de linguagem e outras soluções de IA, incluindo modelos de código aberto. No TJPE, modelos da Deepseek podem ser avaliados para tarefas específicas de processamento de texto ou geração de código, dependendo de suas capacidades e licenças, oferecendo mais opções para la implementação de soluções de IA.</p>
                                `
                            },
                            {
                                id: 8,
                                title: 'Ética e Responsabilidade em IA: Viés algorítmico e transparência, Explicabilidade e Accountability',
                                icon: '⚖️', // Ícone de balança
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Ética e Responsabilidade em IA:</strong> No contexto do TJPE, a ética e a responsabilidade em IA são fundamentais para garantir que as tecnologias de inteligência artificial sejam desenvolvidas e utilizadas de forma justa, segura e em conformidade com os princípios legais e morais. Isso envolve considerar o impacto social das decisões da IA, proteger a privacidade dos cidadãos e assegurar que a tecnologia sirva à justiça e não perpetue desigualdades. A adoção de IA no tribunal exige um framework ético robusto para orientar seu uso.</p>
                                    <p><strong>Viés algorítmico:</strong> Refere-se a preconceitos ou distorções nos resultados de um algoritmo de IA, que podem ocorrer devido a dados de treinamento enviesados ou falhas no design do algoritmo. No TJPE, o viés algorítmico é uma preocupação séria, pois um sistema de IA com viés pode levar a decisões injustas ou discriminatórias em processos judiciais, seja na triagem, na análise de risco ou em outras aplicações. É crucial identificar e mitigar esses vieses para garantir a equidade e a imparcialidade da justiça.</p>
                                    <p><strong>Transparência:</strong> Em IA, a transparência significa a capacidade de entender como um modelo de IA chega a uma determinada decisão ou resultado. No TJPE, a transparência é vital para sistemas de IA que apoiam decisões judiciais, pois é necessário que magistrados, partes e a sociedade compreendam a lógica por trás das recomendações ou classificações da IA. Isso constrói confiança e permite a auditoria e a contestação de resultados, assegurando a accountability.</p>
                                    <p><strong>Explicabilidade:</strong> Refere-se à capacidade de um modelo de IA de explicar suas decisões ou previsões em termos compreensíveis para os humanos. Diferente da transparência (que pode ser sobre o funcionamento interno), a explicabilidade foca em como a IA justifica sua saída. No TJPE, a explicabilidade é crucial para sistemas de IA que auxiliam em sentenças ou análises de risco, pois permite que os juízes entendam os fatores que levaram a uma recomendação, facilitando a revisão e a tomada de decisão final de forma informada e responsável.</p>
                                    <p><strong>Accountability:</strong> Significa a capacidade de atribuir responsabilidade pelas decisões e ações de um sistema de IA, e de responsabilizar as partes envolvidas (desenvolvedores, implementadores, usuários). No TJPE, a accountability em IA é fundamental para garantir que, mesmo com a automação, a responsabilidade final pelas decisões judiciais permaneça clara e atribuível, e que existam mecanismos para corrigir erros e garantir a justiça, protegendo os direitos dos cidadãos.</p>
                                `
                            },
                            {
                                id: 9,
                                title: 'Robotic Process Automation (RPA): capacidades, componentes, aplicações',
                                icon: '🤖', // Ícone de robô
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Robotic Process Automation (RPA):</strong> É uma tecnologia que permite configurar um "robô" de software para emular e integrar ações humanas que interagem com sistemas digitais para executar um processo de negócio. No TJPE, o RPA é uma ferramenta poderosa para automatizar tarefas repetitivas e baseadas em regras, como a extração de dados de documentos, o preenchimento de formulários, o envio de e-mails ou a movimentação de processos entre sistemas. Isso libera os servidores para atividades de maior valor, reduz erros e acelera o fluxo de trabalho.</p>
                                    <p><strong>Capacidades:</strong> As capacidades do RPA incluem a automação de tarefas repetitivas e de alto volume, a interação com diversas aplicações (sistemas legados, web, desktop), a execução 24/7 sem fadiga, a redução de erros humanos e a melhoria da conformidade. No TJPE, o RPA pode ser aplicado para automatizar a triagem inicial de petições, a emissão de certidões simples, a atualização de dados cadastrais ou a conciliação de informações entre diferentes sistemas, aumentando a eficiência operacional.</p>
                                    <p><strong>Componentes:</strong> Os principais componentes de uma solução RPA geralmente incluem: o **Studio** (ambiente de desenvolvimento para criar os robôs), o **Robô** (o software que executa as tarefas automatizadas), e o **Orquestrador** (plataforma central para gerenciar, agendar e monitorar os robôs). No TJPE, esses componentes trabalham em conjunto para projetar, implantar e gerenciar a automação de processos, garantindo que os robôs operem de forma eficiente e segura em toda a infraestrutura do tribunal.</p>
                                    <p><strong>Aplicações:</strong> No TJPE, as aplicações do RPA são vastas. Exemplos incluem: automação da distribuição de processos, preenchimento automático de dados em sistemas legados, extração de informações de documentos digitalizados para indexação, envio automático de notificações e intimações, conciliação de dados entre sistemas financeiros e processuais, e automação de relatórios de gestão. O RPA complementa a IA, lidando com a parte "robótica" e repetitiva dos processos, enquanto a IA foca na "inteligência" e tomada de decisão complexa.</p>
                                `
                            }
                        ];
                        break;
                    case '6':
                        context = `No Tribunal de Justiça de Pernambuco (TJPE), a **Segurança da Informação** é um pilar inegociável para proteger a integridade, confidencialidade e disponibilidade dos dados e sistemas que sustentam a justiça. Esta fase aborda os **fundamentos e normas** que guiam a segurança, as técnicas de **criptografia** para proteger informações sensíveis, e as estratégias de **segurança de redes** para defender a infraestrutura. Exploraremos também a **segurança em aplicações**, identificando vulnerabilidades comuns e as **práticas de desenvolvimento seguro**, além dos desafios e soluções na **segurança em nuvem**. Compreender esses conceitos é essencial para garantir que o ambiente digital do TJPE seja resiliente contra ameaças cibernéticas e mantenha a confiança pública.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Fundamentos e Normas: Conceitos de confidencialidade, integridade, disponibilidade e autenticidade, Princípios da segurança da informação (tríade CIA), Normas ISO/IEC 27001/27002 e Política de Segurança da Informação (PSI) no setor público',
                                icon: '📜', // Ícone de pergaminho/norma
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Confidencialidade:</strong> Garante que a informação seja acessível apenas por entidades autorizadas. No TJPE, isso é crucial para proteger dados sigilosos de processos, informações pessoais de partes e decisões judiciais que não são de domínio público, evitando vazamentos e acessos indevidos.</p>
                                    <p><strong>Integridade:</strong> Assegura que a informação seja precisa, completa e não tenha sido modificada de forma não autorizada. Para o TJPE, a integridade dos dados processuais é vital para a validade das decisões judiciais e para evitar fraudes, garantindo que os documentos e registros não sejam alterados sem permissão.</p>
                                    <p><strong>Disponibilidade:</strong> Garante que os sistemas e as informações estejam acessíveis e utilizáveis quando necessário por entidades autorizadas. No TJPE, a disponibilidade do Processo Judicial Eletrônico (PJe) e de outros sistemas é essencial para a continuidade da prestação jurisdicional, evitando interrupções que possam atrasar processos ou impedir o acesso à justiça.</p>
                                    <p><strong>Autenticidade:</strong> Garante que a identidade de um usuário, sistema ou informação seja genuína e verificável. No TJPE, a autenticidade é fundamental para verificar a identidade de magistrados, servidores, advogados e partes que acessam os sistemas, bem como a validade de documentos eletrônicos (ex: por meio de certificados digitais), assegurando a legitimidade das ações no ambiente digital.</p>
                                    <p><strong>Princípios da segurança da informação (tríade CIA):</strong> A tríade CIA (Confidencialidade, Integridade, Disponibilidade) é o modelo fundamental da segurança da informação. Esses três princípios são interligados e servem como base para qualquer estratégia de segurança. No TJPE, a aplicação da tríade CIA orienta todas as políticas e tecnologias de segurança, desde a proteção de dados sigilosos até a garantia de que os sistemas estejam sempre operacionais para atender às demandas da justiça.</p>
                                    <p><strong>Normas ISO/IEC 27001/27002:</strong> A ISO/IEC 27001 é uma norma internacional que especifica os requisitos para estabelecer, implementar, manter e melhorar continuamente um Sistema de Gestão de Segurança da Informação (SGSI). A ISO/IEC 27002 é um código de prática que fornece diretrizes e boas práticas para controles de segurança da informação. No TJPE, a adoção dessas normas é crucial para implementar um SGSI robusto, garantindo que a segurança da informação seja gerenciada de forma sistemática e abrangente, protegendo os ativos de informação do tribunal e demonstrando conformidade com padrões internacionais.</p>
                                    <p><strong>Política de Segurança da Informação (PSI) no setor público:</strong> A PSI é um conjunto de diretrizes, regras e procedimentos que estabelecem como a informação deve ser protegida dentro de uma organização. No setor público, como o TJPE, a PSI é ainda mais crítica, pois lida com dados sensíveis de cidadãos e processos judiciais. Ela define as responsabilidades de cada um, as regras de uso aceitável de recursos de TI, as diretrizes para tratamento de incidentes e a conformidade com leis e regulamentações (ex: LGPD, Lei de Acesso à Informação). Uma PSI bem definida e implementada é a base para uma cultura de segurança e para a proteção eficaz dos ativos de informação do tribunal.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Criptografia: Conceitos de criptografia simétrica e assimétrica, hash, Algoritmos: AES, RSA, SHA-2, HMAC, certificados digitais e infraestrutura de chave pública (ICP-Brasil)',
                                icon: '🔑', // Ícone de chave
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Conceitos de criptografia simétrica:</strong> Utiliza uma única chave (secreta) tanto para criptografar quanto para descriptografar a informação. É rápida e eficiente para grandes volumes de dados. No TJPE, pode ser usada para proteger o armazenamento de dados em repouso (ex: dados em discos), garantindo que apenas sistemas autorizados com a chave correta possam acessá-los.</p>
                                    <p><strong>Conceitos de criptografia assimétrica:</strong> Utiliza um par de chaves: uma pública (compartilhada) e uma privada (secreta). O que é criptografado com uma chave só pode ser descriptografado com a outra. É mais lenta, mas essencial para autenticação e troca segura de chaves. No TJPE, é fundamental para a assinatura digital de documentos (garantindo a autenticidade do signatário) e para a troca segura de informações entre sistemas ou com o público externo, como no PJe.</p>
                                    <p><strong>Função hash:</strong> É um algoritmo matemático que transforma dados de qualquer tamanho em uma sequência de caracteres de tamanho fixo (hash). É unidirecional (não pode ser revertido) e sensível a pequenas alterações nos dados. No TJPE, funções hash são usadas para verificar a integridade de documentos eletrônicos (se um documento foi alterado após a assinatura) e para armazenar senhas de forma segura (armazenando o hash da senha em vez da senha em texto claro).</p>
                                    <p><strong>Algoritmo AES:</strong> (Advanced Encryption Standard) É um algoritmo de criptografia simétrica amplamente utilizado e considerado muito seguro. No TJPE, o AES pode ser empregado para criptografar grandes volumes de dados sensíveis armazenados em bancos de dados ou em trânsito dentro da rede interna, garantindo a confidencialidade das informações processuais e pessoais.</p>
                                    <p><strong>Algoritmo RSA:</strong> É um dos primeiros algoritmos de criptografia assimétrica e é amplamente utilizado para criptografia e assinaturas digitais. No TJPE, o RSA é a base para a segurança de certificados digitais e para a troca segura de chaves simétricas, sendo crucial para a autenticação de usuários e a proteção de comunicações no ambiente judicial.</p>
                                    <p><strong>Algoritmo SHA-2:</strong> (Secure Hash Algorithm 2) É uma família de funções hash criptográficas, como SHA-256 e SHA-512, que produzem um valor hash de tamanho fixo a partir de uma entrada. No TJPE, o SHA-2 é utilizado para gerar as "impressões digitais" de documentos eletrônicos, garantindo que qualquer alteração no documento seja detectada, e para proteger a integridade de dados e senhas.</p>
                                    <p><strong>Algoritmo HMAC:</strong> (Hash-based Message Authentication Code) É um tipo de código de autenticação de mensagem que usa uma função hash criptográfica e uma chave secreta. É usado para verificar a integridade e a autenticidade de uma mensagem. No TJPE, o HMAC pode ser empregado para garantir que as mensagens trocadas entre sistemas internos ou com parceiros sejam autênticas e não tenham sido adulteradas, protegendo a comunicação de dados sensíveis.</p>
                                    <p><strong>Certificados digitais:</strong> São documentos eletrônicos que vinculam uma chave pública a uma identidade (pessoa física ou jurídica), garantindo a autenticidade e a integridade de transações eletrônicas. No TJPE, os certificados digitais (emitidos por Autoridades Certificadoras) são essenciais para a assinatura eletrônica de documentos por magistrados, servidores e advogados, conferindo validade jurídica e segurança às operações no PJe e em outros sistemas.</p>
                                    <p><strong>Infraestrutura de Chave Pública (ICP-Brasil):</strong> É a estrutura hierárquica e legal que regulamenta a emissão e o uso de certificados digitais no Brasil. A ICP-Brasil garante a validade jurídica dos documentos eletrônicos assinados digitalmente. No TJPE, a conformidade com a ICP-Brasil é fundamental para a validade das assinaturas eletrônicas em processos e documentos, assegurando que as transações digitais no ambiente judicial tenham a mesma força legal que as operações em papel.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'Fundamentos de Segurança de Redes: Firewalls, IDS/IPS, VPNs e Protocolos seguros (HTTPS, TLS, SSH)',
                                icon: '🌐', // Ícone de rede
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Firewalls e seus tipos:</strong> Um firewall é um sistema de segurança de rede que monitora e controla o tráfego de rede de entrada e saída com base em regras de segurança predeterminadas. Tipos comuns incluem: **Firewall de Pacote** (filtra por endereço IP e porta), **Firewall de Estado** (rastreia o estado das conexões), **Firewall de Aplicação (Proxy)** (filtra tráfego em nível de aplicação) e **Firewall de Próxima Geração (NGFW)** (combina várias funcionalidades de segurança). No TJPE, firewalls são a primeira linha de defesa, protegendo a rede interna contra acessos não autorizados e ataques externos, controlando o fluxo de dados entre a internet e os sistemas do tribunal.</p>
                                    <p><strong>Diferença entre IDS e IPS:</strong> IDS (Intrusion Detection System) é um sistema que monitora o tráfego de rede ou a atividade do sistema em busca de atividades maliciosas ou violações de políticas de segurança, apenas alertando sobre a detecção. IPS (Intrusion Prevention System) é um sistema que, além de detectar, também tenta bloquear ou impedir a atividade maliciosa em tempo real. No TJPE, a combinação de IDS e IPS é crucial para detectar e prevenir ataques cibernéticos, como tentativas de invasão, varreduras de portas ou exploração de vulnerabilidades, protegendo os sistemas e dados judiciais de forma proativa.</p>
                                    <p><strong>VPNs:</strong> (Virtual Private Networks) Permitem criar uma conexão segura e criptografada sobre uma rede pública (como a internet). No TJPE, VPNs são essenciais para permitir que servidores e magistrados acessem os sistemas internos do tribunal de forma segura a partir de locais remotos (ex: home office), garantindo que a comunicação seja protegida contra interceptações e acessos não autorizados, mantendo a confidencialidade dos dados em trânsito.</p>
                                    <p><strong>Protocolos seguro HTTPS:</strong> (Hypertext Transfer Protocol Secure) É a versão segura do HTTP, que utiliza criptografia SSL/TLS para proteger a comunicação entre o navegador do usuário e o servidor web. No TJPE, o HTTPS é obrigatório para todos os portais e sistemas web que lidam com informações sensíveis (como o PJe e sistemas de consulta), garantindo que os dados transmitidos (credenciais de login, informações de processos) sejam criptografados e não possam ser lidos por terceiros mal-intencionados.</p>
                                    <p><strong>Protocolos seguro TLS:</strong> (Transport Layer Security) É um protocolo criptográfico que fornece segurança de comunicação pela internet. É o sucessor do SSL (Secure Sockets Layer) e é a base para o HTTPS. No TJPE, o TLS é utilizado para criptografar as comunicações entre servidores, aplicações e usuários, garantindo a confidencialidade e a integridade dos dados em trânsito em diversas camadas da infraestrutura de TI.</p>
                                    <p><strong>Protocolos seguro SSH:</strong> (Secure Shell) É um protocolo de rede criptográfico que permite a comunicação segura entre dois computadores em uma rede insegura. É amplamente utilizado para acesso remoto seguro a servidores e para a transferência segura de arquivos. No TJPE, o SSH é fundamental para que as equipes de TI e administradores de sistemas possam acessar e gerenciar servidores e equipamentos de rede de forma segura, protegendo contra acessos não autorizados e garantindo a integridade das operações de manutenção.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'Segurança em Aplicações: OWASP Top 10 (principais vulnerabilidades em aplicações web), SQL Injection, XSS, CSRF, Broken Authentication e Práticas seguras de desenvolvimento (DevSecOps)',
                                icon: '💻', // Ícone de computador/código
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>OWASP Top 10 (principais vulnerabilidades em aplicações web):</strong> É um documento padrão que lista as 10 vulnerabilidades de segurança mais críticas em aplicações web, servindo como um guia para desenvolvedores e profissionais de segurança. No TJPE, conhecer o OWASP Top 10 é essencial para identificar e mitigar riscos em sistemas como o PJe e portais de serviço, protegendo contra ataques comuns que poderiam comprometer dados judiciais ou a funcionalidade das aplicações. Os pontos mais importantes incluem: Injeção (SQL Injection, Command Injection), Autenticação Quebrada, Exposição de Dados Sensíveis, Entidades Externas XML (XXE), Controle de Acesso Quebrado, Configuração de Segurança Incorreta, Cross-Site Scripting (XSS), Desserialização Insegura, Uso de Componentes com Vulnerabilidades Conhecidas e Registro e Monitoramento Insuficientes.</p>
                                    <p><strong>SQL Injection:</strong> É uma vulnerabilidade de segurança que permite a um atacante interferir nas consultas que uma aplicação faz ao seu banco de dados. No TJPE, um SQL Injection bem-sucedido poderia permitir que um atacante visualize, modifique ou exclua dados de processos, ou até mesmo obtenha acesso não autorizado ao sistema, comprometendo a integridade e a confidencialidade das informações judiciais.</p>
                                    <p><strong>XSS:</strong> (Cross-Site Scripting) É uma vulnerabilidade que permite a um atacante injetar scripts maliciosos (geralmente JavaScript) em páginas web visualizadas por outros usuários. No TJPE, um ataque XSS poderia ser usado para roubar sessões de usuários (magistrados, advogados), redirecionar usuários para sites falsos ou desfigurar páginas do portal, comprometendo a confiança e a segurança dos usuários.</p>
                                    <p><strong>CSRF:</strong> (Cross-Site Request Forgery) É um tipo de ataque que força um usuário autenticado a enviar uma requisição forjada para um servidor web. No TJPE, um ataque CSRF poderia levar um usuário logado a realizar ações indesejadas, como alterar dados de um processo, transferir fundos (se aplicável a sistemas financeiros internos) ou mudar senhas, sem seu conhecimento ou consentimento, explorando a confiança que o navegador tem no usuário autenticado.</p>
                                    <p><strong>Broken Authentication:</strong> Refere-se a falhas na implementação de funções de autenticação ou gerenciamento de sessões que permitem a um atacante comprometer senhas, chaves de sessão ou tokens de autenticação, ou explorar falhas na lógica de autenticação. No TJPE, vulnerabilidades de autenticação quebrada podem levar ao acesso não autorizado a sistemas e dados confidenciais, permitindo que atacantes se passem por usuários legítimos (magistrados, servidores) e executem ações indesevedas.</p>
                                    <p><strong>Práticas seguras de desenvolvimento (DevSecOps):</strong> DevSecOps é a integração da segurança em todas as fases do ciclo de vida de desenvolvimento de software (SDLC), desde o design até a implantação e operação. No TJPE, adotar DevSecOps significa que a segurança não é um "pensamento posterior", mas uma preocupação contínua, com ferramentas automatizadas de análise de código, testes de segurança e monitoramento contínuo. Isso garante que os sistemas judiciais sejam construídos com segurança desde o início, reduzindo vulnerabilidades e protegendo os dados sensíveis de forma mais eficaz.</p>
                                `
                            },
                            {
                                id: 5,
                                title: 'Fundamentos de Segurança em Nuvem: Modelos de responsabilidade compartilhada (IaaS, PaaS, SaaS) e Gerenciamento de identidades e acessos (IAM)',
                                icon: '☁️', // Ícone de nuvem
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Fundamentos de Segurança em Nuvem:</strong> A segurança em nuvem é um conjunto de políticas, tecnologias e controles que protegem dados, aplicações e infraestruturas baseadas em nuvem. No TJPE, ao migrar sistemas ou dados para a nuvem, é essencial entender que a segurança é uma responsabilidade compartilhada entre o provedor de nuvem e o tribunal. Isso envolve proteger contra ameaças cibernéticas, garantir a conformidade regulatória e manter a confidencialidade e integridade das informações judiciais.</p>
                                    <p><strong>SaaS:</strong> (Software as a Service) É um modelo de nuvem onde o provedor gerencia toda a pilha de software e infraestrutura, e o usuário acessa o software pela internet. Ex: e-mail, CRM. No TJPE, ao usar um SaaS (ex: um sistema de gestão de documentos de terceiros hospedado em nuvem), a responsabilidade do tribunal pela segurança é menor, focando principalmente na segurança dos dados inseridos e na gestão de acessos dos usuários.</p>
                                    <p><strong>PaaS:</strong> (Platform as a Service) É um modelo de nuvem onde o provedor gerencia a infraestrutura e a plataforma (ex: sistema operacional, ambiente de execução), e o usuário é responsável pela aplicação e pelos dados. Ex: Google App Engine. No TJPE, ao usar um PaaS para desenvolver e hospedar aplicações judiciais, o tribunal tem mais controle sobre a segurança da aplicação e dos dados, mas o provedor ainda cuida da segurança da infraestrutura subjacente.</p>
                                    <p><strong>IaaS:</strong> (Infrastructure as a Service) É o modelo de nuvem mais flexível, onde o provedor oferece recursos de computação virtualizados (servidores, armazenamento, rede), e o usuário gerencia o sistema operacional, aplicações e dados. Ex: AWS EC2, Google Compute Engine. No TJPE, ao usar IaaS, o tribunal tem o maior controle sobre a segurança, mas também a maior responsabilidade, precisando configurar e gerenciar a segurança do sistema operacional, aplicações e dados hospedados na nuvem.</p>
                                    <p><strong>Gerenciamento de identidades e acessos (IAM):</strong> É um framework de políticas e tecnologias que permite que as organizações gerenciem identidades digitais e controlem o acesso a recursos. No TJPE, o IAM é fundamental para controlar quem pode acessar os sistemas e dados em nuvem, quais permissões cada usuário possui e como a autenticação é realizada. Isso inclui a gestão de usuários, grupos, papéis e políticas de acesso, garantindo que apenas usuários autorizados tenham acesso aos recursos judiciais na nuvem, minimizando riscos de segurança.</p>
                                `
                            }
                        ];
                        break;
                    case '7':
                        context = `No Tribunal de Justiça de Pernambuco (TJPE), a **Gestão e Governança de TIC** são cruciais para alinhar a tecnologia aos objetivos estratégicos do tribunal, garantindo que os investimentos em TI gerem valor real para a prestação jurisdicional. Esta fase explora como a TI é planejada, organizada, dirigida e controlada para suportar a missão do TJPE. Abordaremos o **planejamento estratégico e o Plano Diretor de TIC**, que definem a visão e os caminhos tecnológicos, a importância da **governança** para assegurar a conformidade e a eficácia, a **gestão de riscos** para proteger os ativos, e a **gestão de projetos** para entregar soluções com sucesso. Compreender esses conceitos é essencial para garantir que a área de TI do TJPE opere de forma eficiente, transparente e alinhada às necessidades da justiça.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Planejamento estratégico e Plano Diretor de TIC',
                                icon: '🗺️', // Ícone de mapa
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Planejamento estratégico:</strong> É o processo de definir a direção e tomar decisões sobre a alocação de recursos para seguir essa direção. No TJPE, o planejamento estratégico de TI envolve a criação de uma visão de longo prazo para a tecnologia, alinhando-a aos objetivos gerais do tribunal, como a digitalização de processos, a melhoria da celeridade judicial ou a expansão do acesso à justiça. Ele define as prioridades de investimento em tecnologia, as competências necessárias e os resultados esperados para os próximos anos.</p>
                                    <p><strong>Plano Diretor de TIC (PDTIC):</strong> É um instrumento de planejamento que detalha as ações, projetos, investimentos e metas da área de Tecnologia da Informação e Comunicação (TIC) para um determinado período, geralmente de 2 a 4 anos. No TJPE, o PDTIC é fundamental para traduzir o planejamento estratégico em ações concretas, como a implementação de novos sistemas (ex: PJe), a atualização da infraestrutura de rede, a capacitação de equipes ou a adoção de novas tecnologias (ex: IA, nuvem). Ele serve como um guia para a gestão da TI, garantindo que os recursos sejam utilizados de forma eficiente e que os projetos sejam entregues dentro do prazo e orçamento, contribuindo para a modernização da justiça.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Governança, gestão de riscos e gestão de projetos',
                                icon: '🏛️', // Ícone de templo/governança
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Governança:</strong> Em TI, refere-se ao conjunto de responsabilidades e práticas exercidas pelo conselho e pela gestão executiva com o objetivo de fornecer direção estratégica, garantir que os objetivos sejam alcançados, que os riscos sejam gerenciados adequadamente e que os recursos da organização sejam usados de forma responsável. No TJPE, a governança de TI assegura que as decisões sobre tecnologia estejam alinhadas com a missão do tribunal, que os investimentos gerem valor e que os sistemas sejam seguros e conformes às regulamentações, promovendo a transparência e a eficácia da gestão pública.</p>
                                    <p><strong>Gestão de riscos:</strong> É o processo de identificar, avaliar e controlar as ameaças que podem afetar os ativos de TI e os objetivos do tribunal. No TJPE, a gestão de riscos em TI é crucial para proteger contra falhas de sistema, ataques cibernéticos, perda de dados e outros eventos que possam comprometer a continuidade dos serviços judiciais. Envolve a análise de vulnerabilidades, a implementação de controles de segurança e a criação de planos de contingência e recuperação de desastres, minimizando o impacto de eventos adversos.</p>
                                    <p><strong>Gestão de projetos:</strong> É a aplicação de conhecimentos, habilidades, ferramentas e técnicas para as atividades do projeto a fim de atender aos requisitos do projeto. No TJPE, a gestão de projetos é fundamental para planejar, executar e controlar a implementação de novos sistemas (ex: módulos do PJe), a atualização de infraestrutura ou a migração para novas plataformas. Utilizando metodologias como PMBOK ou ágeis (Scrum, Kanban), a gestão de projetos garante que as entregas sejam realizadas dentro do prazo, orçamento e escopo, com a qualidade esperada, maximizando o retorno sobre o investimento em TI para o tribunal.</p>
                                `
                            }
                        ];
                        break;
                    case '8':
                        context = `No Tribunal de Justiça de Pernambuco (TJPE), a **Legislação e a Ética em TI** são fundamentais para garantir que o uso da tecnologia esteja em conformidade com as leis vigentes e com os princípios éticos que regem a administração pública e a justiça. Esta fase aborda as principais leis e normas que impactam o trabalho do analista de TI no setor público, desde o **Governo Digital** e a **Lei de Acesso à Informação** até a **LGPD**, as **Resoluções do CNJ** que regulamentam o processo judicial eletrônico, e as leis que regem a **organização judiciária**, o **regime jurídico dos servidores** e as **licitações**. Compreender essas normativas é essencial para todos os profissionais de TI, assegurando a integridade, a lisura e a conformidade das operações judiciais.`;
                        missions = [
                            {
                                id: 1,
                                title: 'Governo Digital (Lei nº 14.129/2021)',
                                icon: '🏛️', // Ícone de prédio público
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Governo Digital (Lei nº 14.129/2021):</strong> Esta lei dispõe sobre princípios, regras e instrumentos para o aumento da eficiência da administração pública por meio da digitalização de serviços, da desburocratização e da participação popular. Para a banca IBFC, é importante focar na obrigatoriedade da digitalização de serviços públicos, na simplificação de procedimentos, no uso de plataformas digitais para interação com o cidadão, e na promoção da interoperabilidade entre sistemas. No TJPE, isso se traduz na expansão do PJe, na oferta de serviços online e na integração de dados para uma justiça mais acessível e eficiente.</p>
                                `
                            },
                            {
                                id: 2,
                                title: 'Lei de Acesso à Informação (Lei nº 12.527/2011)',
                                icon: '📖', // Ícone de livro aberto
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Lei de Acesso à Informação (Lei nº 12.527/2011):</strong> A LAI regulamenta o direito constitucional de acesso às informações públicas, estabelecendo que a publicidade é a regra e o sigilo a exceção. Para a banca IBFC, os pontos-chave incluem: a transparência ativa (publicação de informações sem solicitação), a transparência passiva (atendimento a pedidos de informação), os prazos para resposta, as exceções de sigilo (informações pessoais e sigilosas), e a responsabilidade dos órgãos e servidores. No TJPE, a LAI impacta diretamente a divulgação de dados processuais públicos, a gestão de portais de transparência e a forma como as informações são disponibilizadas aos cidadãos, garantindo a fiscalização e o controle social.</p>
                                `
                            },
                            {
                                id: 3,
                                title: 'LGPD: Lei Geral de Proteção de Dados (Lei nº 13.709/2018)',
                                icon: '🛡️', // Ícone de escudo
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Lei Geral de Proteção de Dados (Lei nº 13.709/2018):</strong> A LGPD estabelece regras sobre coleta, uso, armazenamento e compartilhamento de dados pessoais por empresas e órgãos públicos, visando proteger os direitos fundamentais de liberdade e privacidade. Para a banca IBFC, é crucial entender: os princípios da LGPD (finalidade, adequação, necessidade, transparência, segurança, etc.), os direitos dos titulares de dados (acesso, correção, exclusão), as figuras do controlador e operador, o encarregado de dados (DPO), as bases legais para tratamento de dados, e as sanções em caso de descumprimento. No TJPE, a LGPD é de extrema importância devido ao volume e sensibilidade dos dados pessoais e sensíveis tratados em processos, exigindo conformidade rigorosa em todos os sistemas e procedimentos de TI.</p>
                                `
                            },
                            {
                                id: 4,
                                title: 'Resoluções do CNJ e Portarias (nº 185/2013, nº 335/2020, nº 370/2021, nº 396/2021, nº 455/2022, nº 468/2022, nº 615/2022 e Portarias n° 162/2021 e n° 252/2020)',
                                icon: '🏛️', // Ícone de templo/CNJ
                                status: 'Não concluída',
                                theory: `
                                    <p>As Resoluções e Portarias do Conselho Nacional de Justiça (CNJ) são fundamentais para regulamentar o processo judicial eletrônico e a gestão da tecnologia no Poder Judiciário. Para a banca IBFC, é essencial conhecer o objetivo principal de cada uma e seu impacto na atuação do analista de TI no TJPE. Você pode consultar os atos normativos no site oficial do CNJ: <a href="https://atos.cnj.jus.br/atos?tipoAto%5B0%5D=7&page=1" target="_blank" class="text-blue-400 hover:underline">CNJ Atos Normativos</a>.</p>
                                    <p><strong>Resolução nº 185/2013:</strong> Dispõe sobre a instituição do Sistema Processo Judicial Eletrônico (PJe) como sistema de processo judicial eletrônico de uso obrigatório nos órgãos do Poder Judiciário e estabelece parâmetros para sua implantação e funcionamento. Ponto-chave: obrigatoriedade e padronização do PJe.</p>
                                    <p><strong>Resolução nº 335/2020:</strong> Institui a política judiciária nacional de incentivo à participação institucional e a colaboração de magistrados e servidores em programas de pós-graduação stricto sensu. Ponto-chave: incentivo à qualificação e pesquisa no judiciário.</p>
                                    <p><strong>Resolução nº 370/2021:</strong> Dispõe sobre o uso da inteligência artificial no Poder Judiciário. Ponto-chave: regulamenta o uso ético e responsável da IA, viés algorítmico, explicabilidade e transparência.</p>
                                    <p><strong>Resolução nº 396/2021:</strong> Institui o Programa Nacional de Governança e Gestão de TI do Poder Judiciário (InfoJud). Ponto-chave: estabelece diretrizes e modelos para a governança e gestão de TI nos tribunais, buscando padronização e eficiência.</p>
                                    <p><strong>Resolução nº 455/2022:</strong> Dispõe sobre o Programa Nacional de Enfrentamento ao Tráfico de Pessoas e ao Trabalho Escravo no âmbito do Poder Judiciário. Ponto-chave: ações judiciais e tecnológicas para combater o tráfico humano e trabalho escravo.</p>
                                    <p><strong>Resolução nº 468/2022:</strong> Dispõe sobre a Política Nacional de Gestão de Documentos e Memória do Poder Judiciário. Ponto-chave: diretrizes para a gestão de documentos físicos e digitais, preservação da memória institucional.</p>
                                    <p><strong>Resolução nº 615/2022:</strong> Dispõe sobre as diretrizes para o uso de tecnologias e sistemas de informação e comunicação no Poder Judiciário. Ponto-chave: orienta sobre a adoção e uso de TIC, segurança e interoperabilidade.</p>
                                    <p><strong>Portaria n° 162/2021:</strong> Trata da instituição do Laboratório de Inovação, Inteligência e ODS do CNJ (LIODS). Ponto-chave: fomento à inovação, IA e alinhamento com os Objetivos de Desenvolvimento Sustentável (ODS) da ONU.</p>
                                    <p><strong>Portaria n° 252/2020:</strong> Dispõe sobre o uso de videoconferências e outros recursos tecnológicos para a realização de audiências e sessões de julgamento no âmbito do Poder Judiciário. Ponto-chave: regulamentação das audiências e sessões virtuais, essencial durante e após a pandemia.</p>
                                `
                            },
                            {
                                id: 5,
                                title: 'Resolução nº 395/2017 (Regimento Interno do Tribunal de Justiça de Pernambuco) e suas atualizações',
                                icon: '🏛️', // Ícone de prédio do tribunal
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Resolução nº 395/2017 (Regimento Interno do Tribunal de Justiça de Pernambuco) e suas atualizações:</strong> O Regimento Interno do TJPE é o conjunto de normas que organiza o funcionamento interno do tribunal, desde a competência dos órgãos julgadores até os procedimentos para tramitação de processos e recursos. Para a banca IBFC, é fundamental compreender como o regimento estrutura o trabalho judicial e administrativo, e como as atualizações incorporam novas tecnologias (ex: PJe, inteligência artificial) e práticas para otimizar a prestação jurisdicional. Pontos-chave incluem: a organização do tribunal, as atribuições dos desembargadores e servidores, os ritos processuais internos e a adaptação às inovações tecnológicas no contexto do TJPE.</p>
                                `
                            },
                            {
                                id: 6,
                                title: 'Lei Complementar nº 100/2007 - Capítulo I – artigos de 17º a 47º (Código de Organização Judiciária do Estado de Pernambuco)',
                                icon: '⚖️', // Ícone de balança
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Lei Complementar nº 100/2007 - Capítulo I – artigos de 17º a 47º (Código de Organização Judiciária do Estado de Pernambuco):</strong> Esta lei estabelece a estrutura e o funcionamento do Poder Judiciário de Pernambuco. Para a banca IBFC, o foco nos artigos 17º a 47º provavelmente abrange aspectos como a composição dos órgãos do tribunal, a competência das varas e comarcas, a criação e extinção de cargos, e as diretrizes gerais para a administração da justiça no estado. Para o analista de TI, é importante entender como essa organização impacta a demanda por sistemas, a distribuição de recursos tecnológicos e a necessidade de interoperabilidade entre as diferentes unidades judiciárias do TJPE.</p>
                                `
                            },
                            {
                                id: 7,
                                title: 'Lei Estadual nº 6.123/1968 (Regime Jurídico dos Servidores Públicos do Estado de Pernambuco)',
                                icon: '👨‍⚖️', // Ícone de servidor público
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Lei Estadual nº 6.123/1968 (Regime Jurídico dos Servidores Públicos do Estado de Pernambuco):</strong> Esta lei é o estatuto dos servidores públicos civis do Estado de Pernambuco, definindo seus direitos, deveres, proibições, formas de provimento e vacância de cargos, regime disciplinar, entre outros. Para a banca IBFC, os principais pontos a serem estudados incluem: as formas de ingresso no serviço público (concurso), a estabilidade, as licenças, as férias, as aposentadorias, os deveres e proibições dos servidores. Para o analista de TI no TJPE, é fundamental conhecer essa legislação para entender o contexto de trabalho, as responsabilidades éticas e legais, e como as políticas de RH são suportadas por sistemas de informação.</p>
                                `
                            },
                            {
                                id: 8,
                                title: 'Lei nº 11.419/2006 (Informatização do Processo Judicial)',
                                icon: '💻', // Ícone de computador
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Lei nº 11.419/2006 (Informatização do Processo Judicial):</strong> Esta lei dispõe sobre a informatização do processo judicial, autorizando o uso de meio eletrônico para a prática de atos processuais, comunicação e transmissão de peças. Para a banca IBFC, os pontos-chave incluem: a validade jurídica dos documentos eletrônicos, a assinatura eletrônica, a comunicação processual por meio eletrônico, a digitalização de autos e a interoperabilidade entre sistemas. No TJPE, esta lei é a base legal para o funcionamento do PJe e de todos os sistemas que suportam a tramitação eletrônica de processos, sendo crucial para a atuação do analista de TI na garantia da legalidade e segurança dos atos digitais.</p>
                                `
                            },
                            {
                                id: 9,
                                title: 'Lei nº 14.133/21 (Licitações e Contratos Administrativos)',
                                icon: '📄', // Ícone de documento
                                status: 'Não concluída',
                                theory: `
                                    <p><strong>Lei nº 14.133/21 (Licitações e Contratos Administrativos):</strong> Esta é a Nova Lei de Licitações e Contratos Administrativos, que substitui as leis anteriores (8.666/93, 10.520/02 e 12.462/11). Para a banca IBFC, é essencial conhecer os princípios (legalidade, impessoalidade, moralidade, publicidade, eficiência, interesse público, etc.), as modalidades de licitação (concorrência, diálogo competitivo, concurso, leilão, pregão), os critérios de julgamento, as fases do processo licitatório e as regras de contratação. Para o analista de TI no TJPE, essa lei é fundamental para a aquisição de softwares, hardwares, serviços de TI e soluções tecnológicas, garantindo que os processos de contratação sejam transparentes, eficientes e em conformidade com a legislação, evitando irregularidades e otimizando os investimentos públicos em tecnologia.</p>
                                `
                            }
                        ];
                        break;
                    default:
                        context = `Selecione uma fase para ver o contexto e as missões.`;
                        missions = [];
                        break;
                }
                return { context, missions };
            };


            // Função para mostrar a tela de seleção de fases
            startGameButton.addEventListener('click', () => {
                console.log('startGameButton clicked');
                const playerName = playerNameInput.value.trim();
                if (playerName) {
                    gameData.playerName = playerName; // Salva o nome do jogador
                    displayedPlayerName.textContent = playerName;
                } else {
                    gameData.playerName = 'Helton Leite'; // Usa o placeholder se nada for digitado
                    displayedPlayerName.textContent = 'Helton Leite';
                }
                initialScreen.classList.add('hidden');
                phaseSelectionScreen.classList.remove('hidden');
                updateScoreDisplays(); // Atualiza a exibição da pontuação
                console.log('initialScreen hidden:', initialScreen.classList.contains('hidden'));
                console.log('phaseSelectionScreen visible:', !phaseSelectionScreen.classList.contains('hidden'));
            });

            // Função para voltar à tela inicial
            backToStartButton.addEventListener('click', () => {
                console.log('backToStartButton clicked');
                phaseSelectionScreen.classList.add('hidden');
                initialScreen.classList.remove('hidden');
                console.log('phaseSelectionScreen hidden:', phaseSelectionScreen.classList.contains('hidden'));
                console.log('initialScreen visible:', !initialScreen.classList.contains('hidden'));
            });

            // Adiciona listener para clicar nos cards de fase
            phasesGrid.addEventListener('click', (event) => {
                const phaseCard = event.target.closest('.phase-card');
                if (phaseCard) {
                    gameData.currentPhaseId = phaseCard.dataset.phaseId; // Salva a fase atual
                    console.log('Phase card clicked:', gameData.currentPhaseId);
                    const phaseTitle = phaseCard.dataset.phaseTitle;

                    const { context, missions } = getPhaseContent(gameData.currentPhaseId, phaseTitle);

                    missionPhaseTitle.textContent = phaseTitle;
                    missionContextText.textContent = context;

                    // Limpa as missões anteriores e renderiza as novas
                    missionsGrid.innerHTML = '';
                    missions.forEach(mission => {
                        // Inicializa o histórico da missão se não existir
                        if (!gameData.phases[gameData.currentPhaseId].missions[mission.id]) {
                            gameData.phases[gameData.currentPhaseId].missions[mission.id] = { correct: 0, incorrect: 0 };
                        }
                        const missionStats = gameData.phases[gameData.currentPhaseId].missions[mission.id];

                        const missionElement = document.createElement('div');
                        missionElement.classList.add('mission-card');
                        missionElement.dataset.missionId = mission.id;
                        missionElement.innerHTML = `
                            <span class="mission-card-icon" role="img" aria-label="Mission icon">${mission.icon}</span>
                            <p class="text-white font-bold text-lg mb-2">Missão ${mission.id}: ${mission.title}</p>
                            <p class="text-gray-400 text-sm score-display">Acertos: ${missionStats.correct}, Erros: ${missionStats.incorrect}</p>
                        `;
                        // Adiciona listener para abrir a tela de teoria ao clicar na missão
                        missionElement.addEventListener('click', () => {
                            gameData.currentMissionId = mission.id; // Salva a missão atual
                            console.log('Mission card clicked:', gameData.currentMissionId);
                            theoryMissionTitle.textContent = `Missão ${mission.id}: ${mission.title}`;
                            theoryContent.innerHTML = mission.theory; // Insere o conteúdo HTML da teoria

                            // Limpa as questões geradas anteriormente ao mudar de missão
                            questoesGeradasDiv.innerHTML = '';


                            missionScreen.classList.add('hidden');
                            theoryScreen.classList.remove('hidden');
                            console.log('missionScreen hidden:', missionScreen.classList.contains('hidden'));
                            console.log('theoryScreen visible:', !theoryScreen.classList.contains('hidden'));
                        });
                        missionsGrid.appendChild(missionElement);
                    });

                    // Reseta e esconde os elementos de redação ao mudar de fase
                    temaRedacaoOutput.classList.add('hidden');
                    redacaoTema.textContent = '';
                    redacaoTopicos.innerHTML = '';
                    verEspelhoRedacaoBtn.classList.add('hidden');
                    espelhoRedacaoOutput.classList.add('hidden');
                    espelhoRedacaoOutput.innerHTML = '';


                    phaseSelectionScreen.classList.add('hidden');
                    missionScreen.classList.remove('hidden');
                    console.log('phaseSelectionScreen hidden:', phaseSelectionScreen.classList.contains('hidden'));
                    console.log('missionScreen visible:', !missionScreen.classList.contains('hidden'));
                }
            });

            // Função para voltar à tela de seleção de fases a partir da tela de missões
            backToPhaseSelectionButton.addEventListener('click', () => {
                console.log('backToPhaseSelectionButton clicked');
                missionScreen.classList.add('hidden');
                phaseSelectionScreen.classList.remove('hidden');
                updateScoreDisplays(); // Atualiza a exibição da pontuação ao voltar
                console.log('missionScreen hidden:', missionScreen.classList.contains('hidden'));
                console.log('phaseSelectionScreen visible:', !phaseSelectionScreen.classList.contains('hidden'));
            });

            // Função para voltar à tela de missões a partir da tela de teoria
            backToMissionsButton.addEventListener('click', () => {
                console.log('backToMissionsButton clicked');
                theoryScreen.classList.add('hidden');
                missionScreen.classList.remove('hidden');
                console.log('theoryScreen hidden:', theoryScreen.classList.contains('hidden'));
                console.log('missionScreen visible:', !missionScreen.classList.contains('hidden'));
            });

            // Lógica para exibir o relatório final
            viewReportButton.addEventListener('click', () => {
                console.log('viewReportButton clicked');
                reportPlayerName.textContent = gameData.playerName;
                reportTotalScore.textContent = gameData.totalScore;
                reportTotalCorrect.textContent = gameData.totalCorrectAnswers;
                reportTotalIncorrect.textContent = gameData.totalIncorrectAnswers;

                reportDetails.innerHTML = ''; // Limpa detalhes anteriores

                for (const phaseId in gameData.phases) {
                    const phaseData = gameData.phases[phaseId];
                    const phaseTitleElement = document.querySelector(`.phase-card[data-phase-id="${phaseId}"] p:first-of-type`);
                    const phaseTitle = phaseTitleElement ? phaseTitleElement.textContent : `Fase ${phaseId}`;

                    let phaseHtml = `
                        <div class="bg-[#2c3e50] rounded-lg p-6 sm:p-8 mb-6 shadow-inner text-white text-left">
                            <h3 class="text-xl font-semibold mb-3">${phaseTitle}</h3>
                            <p class="mb-2"><strong>Acertos na Fase:</strong> ${phaseData.correct} | <strong>Erros na Fase:</strong> ${phaseData.incorrect}</p>
                            <div class="ml-4 mt-4">
                                <h4 class="text-lg font-semibold mb-2">Missões:</h4>
                    `;

                    for (const missionId in phaseData.missions) {
                        const missionData = phaseData.missions[missionId];
                        // Encontrar o título da missão pelo ID (precisa ser mais robusto se os IDs de missão não forem únicos globalmente)
                        // Por simplicidade, vamos usar um placeholder ou uma busca mais complexa se necessário
                        const missionTitleElement = document.querySelector(`#missionsGrid [data-mission-id="${missionId}"] p:first-of-type`);
                        const missionTitle = missionTitleElement ? missionTitleElement.textContent.replace(`Missão ${missionId}: `, '') : `Missão ${missionId}`;

                        phaseHtml += `
                                <p class="mb-1 ml-2"><strong>${missionTitle}:</strong> Acertos: ${missionData.correct}, Erros: ${missionData.incorrect}</p>
                        `;
                    }
                    phaseHtml += `
                            </div>
                        </div>
                    `;
                    reportDetails.innerHTML += phaseHtml;
                }


                phaseSelectionScreen.classList.add('hidden');
                reportScreen.classList.remove('hidden');
            });

            // Função para voltar para a seleção de fases a partir do relatório
            backToPhaseSelectionFromReportButton.addEventListener('click', () => {
                console.log('backToPhaseSelectionFromReportButton clicked');
                reportScreen.classList.add('hidden');
                phaseSelectionScreen.classList.remove('hidden');
                updateScoreDisplays();
            });


            // Lógica de Geração de Questões com a API Gemini
            if (gerarQuestoesBtn && questoesGeradasDiv && theoryContent && loadingIndicator) {
                gerarQuestoesBtn.addEventListener('click', async () => {
                    loadingIndicator.classList.remove('hidden'); // Mostra o indicador de carregamento
                    questoesGeradasDiv.innerHTML = ''; // Limpa questões anteriores

                    // Pega o conteúdo de texto da teoria que está sendo exibida
                    const teoria = theoryContent.innerText;

                    if (!teoria || teoria.trim() === '') {
                        questoesGeradasDiv.innerHTML = '<p class="text-red-500 text-center">Não foi possível encontrar conteúdo teórico na missão para gerar questões.</p>';
                        loadingIndicator.classList.add('hidden');
                        return;
                    }

                    // Limita o tamanho da teoria para evitar estouro de token na API Gemini
                    const teoriaTruncada = teoria.substring(0, 4000); // Ajuste conforme necessário

                    // Prompt detalhado para a API Gemini
                    const prompt = `Com base no seguinte conteúdo teórico sobre Tecnologia da Informação para o cargo de Analista em TI, nível superior, considerando o estilo da banca IBFC que foca em conceitos fundamentais, normas (como ITIL, COBIT, ISO 27001, LGPD) e questões diretas:

"""
${teoriaTruncada}
"""

Crie 5 questões de múltipla escolha (A, B, C, D). Para cada questão, forneça a alternativa correta e uma justificativa detalhada que explique por que a alternativa está correta e por que as outras estão incorretas ou menos corretas. A justificativa deve ser concisa e focada nos aspectos mais importantes da resposta.

Formato da saída esperada (JSON):
[
  {
    "questao": "Texto da questão 1?",
    "alternativas": {
      "a": "Alternativa A",
      "b": "Alternativa B",
      "c": "Alternativa C",
      "d": "Alternativa D"
    },
    "respostaCorreta": "a",
    "justificativa": "Explicação detalhada da resposta."
  }
]
`;

                    try {
                        // Payload para a API Gemini (diretamente, sem proxy aqui no Canvas)
                        const payload = {
                            contents: [{ role: "user", parts: [{ text: prompt }] }],
                            generationConfig: {
                                responseMimeType: "application/json",
                                responseSchema: {
                                    type: "ARRAY",
                                    items: {
                                        type: "OBJECT",
                                        properties: {
                                            "questao": { "type": "STRING" },
                                            "alternativas": {
                                                "type": "OBJECT",
                                                "properties": {
                                                    "a": { "type": "STRING" },
                                                    "b": { "type": "STRING" },
                                                    "c": { "type": "STRING" },
                                                    "d": { "type": "STRING" }
                                                }
                                            },
                                            "respostaCorreta": { "type": "STRING" },
                                            "justificativa": { "type": "STRING" }
                                        },
                                        "required": ["questao", "alternativas", "respostaCorreta", "justificativa"]
                                    }
                                }
                            }
                        };

                        // URL DIRETA da API Gemini para uso no Canvas
                        const apiKey = ""; // A API Key é injetada automaticamente pelo Canvas
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                        let retries = 0;
                        const maxRetries = 5;
                        let delay = 1000; // Começa com 1 segundo de atraso

                        let result;
                        while (retries < maxRetries) {
                            try {
                                const response = await fetch(apiUrl, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify(payload) // Envia o payload direto para a API Gemini
                                });

                                if (!response.ok) {
                                    if (response.status === 429) { // Too Many Requests
                                        console.warn(`Limite de taxa atingido. Tentando novamente em ${delay / 1000}s...`);
                                        await new Promise(res => setTimeout(res, delay));
                                        delay *= 2; // Backoff exponencial
                                        retries++;
                                        continue;
                                    }
                                    throw new Error(`Erro HTTP! Status: ${response.status}`);
                                }

                                result = await response.json();
                                break; // Sai do loop se a requisição for bem-sucedida
                            } catch (error) {
                                console.error("Erro ao buscar da API Gemini (questões):", error);
                                retries++;
                                if (retries < maxRetries) {
                                    console.warn(`Tentando novamente em ${delay / 1000}s...`);
                                    await new Promise(res => setTimeout(res, delay));
                                    delay *= 2;
                                } else {
                                    throw error; // Relança o erro se o número máximo de tentativas for atingido
                                }
                            }
                        }

                        if (!result) {
                            throw new Error("Falha ao obter resposta da API Gemini (questões) após múltiplas tentativas.");
                        }

                        // Verifica a estrutura da resposta da API Gemini
                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {

                            const jsonText = result.candidates[0].content.parts[0].text;
                            let questoes;
                            try {
                                questoes = JSON.parse(jsonText);
                            } catch (parseError) {
                                console.error("Erro ao fazer parse do JSON das questões:", parseError);
                                questoesGeradasDiv.innerHTML = '<p class="text-red-500 text-center">Erro ao processar as questões geradas. O formato JSON pode estar inválido.</p>';
                                return;
                            }


                            // Renderiza as questões no HTML
                            let htmlQuestoes = `
                                <h2 class="text-2xl font-semibold text-gray-800 mb-6 text-center text-white">Questões Geradas (IBFC - Analista em TI)</h2>
                            `;
                            questoes.forEach((q, index) => {
                                htmlQuestoes += `
                                    <div class="mb-8 p-6 bg-[#2c3e50] border border-gray-700 rounded-lg shadow-sm question-container text-white">
                                        <p class="font-bold text-xl mb-3">Questão ${index + 1}: ${q.questao}</p>
                                        <div class="alternatives-container" data-correct-answer="${q.respostaCorreta}">
                                            <button class="alternative-button" data-alternative="a">a) ${q.alternativas.a}</button>
                                            <button class="alternative-button" data-alternative="b">b) ${q.alternativas.b}</button>
                                            <button class="alternative-button" data-alternative="c">c) ${q.alternativas.c}</button>
                                            <button class="alternative-button" data-alternative="d">d) ${q.alternativas.d}</button>
                                        </div>
                                        <div class="feedback-box hidden">
                                            <p class="feedback-message font-semibold mb-2"></p>
                                            <p class="text-sm text-justify"><strong>Resposta Correta:</strong> <span class="correct-answer-display font-bold"></span></p>
                                            <p class="text-sm text-justify"><strong>Justificativa:</strong> ${q.justificativa}</p>
                                        </div>
                                    </div>
                                `;
                            });
                            questoesGeradasDiv.innerHTML = htmlQuestoes;

                            // Adiciona listeners para os botões das alternativas
                            document.querySelectorAll('.alternative-button').forEach(button => {
                                button.addEventListener('click', (event) => {
                                    const selectedButton = event.target;
                                    const parentContainer = selectedButton.closest('.question-container');
                                    const alternativesContainer = parentContainer.querySelector('.alternatives-container');
                                    const correctAnswer = alternativesContainer.dataset.correctAnswer;
                                    const feedbackBox = parentContainer.querySelector('.feedback-box');
                                    const feedbackMessage = parentContainer.querySelector('.feedback-message');
                                    const correctAnswerDisplay = parentContainer.querySelector('.correct-answer-display');

                                    // Desativa todos os botões da questão
                                    alternativesContainer.querySelectorAll('.alternative-button').forEach(btn => {
                                        btn.disabled = true;
                                        btn.classList.remove('hover:from-blue-600', 'hover:to-indigo-700', 'hover:scale-105');
                                    });

                                    // Atualiza a pontuação e o histórico
                                    if (selectedButton.dataset.alternative === correctAnswer) {
                                        selectedButton.classList.add('correct');
                                        feedbackMessage.textContent = 'Você acertou! 😊';
                                        gameData.totalScore += 1;
                                        gameData.totalCorrectAnswers += 1;
                                        gameData.phases[gameData.currentPhaseId].correct += 1;
                                        gameData.phases[gameData.currentPhaseId].missions[gameData.currentMissionId].correct += 1;
                                    } else {
                                        selectedButton.classList.add('incorrect');
                                        feedbackMessage.textContent = 'Você errou! 😔';
                                        gameData.totalIncorrectAnswers += 1;
                                        gameData.phases[gameData.currentPhaseId].incorrect += 1;
                                        gameData.phases[gameData.currentPhaseId].missions[gameData.currentMissionId].incorrect += 1;
                                        // Destaca a resposta correta se o usuário errou
                                        alternativesContainer.querySelector(`[data-alternative="${correctAnswer}"]`).classList.add('correct');
                                    }

                                    correctAnswerDisplay.textContent = correctAnswer.toUpperCase(); // Exibe a resposta correta
                                    feedbackBox.classList.remove('hidden'); // Mostra a caixa de feedback
                                    updateScoreDisplays(); // Atualiza a exibição da pontuação geral e por fase
                                });
                            });

                        } else {
                            questoesGeradasDiv.innerHTML = '<p class="text-red-500 text-center">Não foi possível gerar questões. A estrutura de resposta da API foi inesperada.</p>';
                            console.error("Estrutura de resposta Gemini inesperada:", result);
                        }

                    } catch (error) {
                        console.error('Erro ao gerar questões:', error);
                        questoesGeradasDiv.innerHTML = `<p class="text-red-500 text-center">Ocorreu um erro ao gerar as questões: ${error.message}. Por favor, tente novamente.</p>`;
                    } finally {
                        loadingIndicator.classList.add('hidden'); // Esconde o indicador de carregamento
                    }
                });
            } else {
                console.error("Um ou mais elementos HTML necessários para a geração de questões não foram encontrados. Verifique os IDs.");
            }

            // Lógica para Geração de Tema de Redação
            if (gerarTemaRedacaoBtn) {
                gerarTemaRedacaoBtn.addEventListener('click', async () => {
                    loadingRedacaoTheme.classList.remove('hidden');
                    temaRedacaoOutput.classList.add('hidden'); // Esconde tema anterior
                    espelhoRedacaoOutput.classList.add('hidden'); // Esconde espelho anterior
                    verEspelhoRedacaoBtn.classList.add('hidden'); // Esconde botão do espelho

                    const phaseTitle = missionPhaseTitle.textContent;
                    const phaseContext = missionContextText.textContent;

                    const promptTema = `Com base no conteúdo da "${phaseTitle}" e no contexto: "${phaseContext}", e considerando o dia a dia das atividades de um Analista em TI de um Tribunal de Justiça (TJPE), gere um tema de redação para concurso e 3 tópicos para que eu desenvolva. O tema e os tópicos devem ser relevantes para o contexto e o cargo.

Formato da saída esperada (JSON):
{
  "tema": "Tema da redação gerado aqui.",
  "topicos": [
    "Tópico 1 para desenvolvimento.",
    "Tópico 2 para desenvolvimento.",
    "Tópico 3 para desenvolvimento."
  ]
}
`;
                    try {
                        // Payload para a API Gemini (diretamente, sem proxy aqui no Canvas)
                        const payload = {
                            contents: [{ role: "user", parts: [{ text: promptTema }] }],
                            generationConfig: {
                                responseMimeType: "application/json",
                                responseSchema: {
                                    type: "OBJECT",
                                    properties: {
                                        "tema": { "type": "STRING" },
                                        "topicos": {
                                            "type": "ARRAY",
                                            "items": { "type": "STRING" },
                                            "minItems": 3,
                                            "maxItems": 3
                                        }
                                    },
                                    "required": ["tema", "topicos"]
                                }
                            }
                        };

                        // URL DIRETA da API Gemini para uso no Canvas
                        const apiKey = ""; // A API Key é injetada automaticamente pelo Canvas
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                        let retries = 0;
                        const maxRetries = 5;
                        let delay = 1000;

                        let result;
                        while (retries < maxRetries) {
                            try {
                                const response = await fetch(apiUrl, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify(payload)
                                });

                                if (!response.ok) {
                                    if (response.status === 429) {
                                        console.warn(`Limite de taxa atingido. Tentando novamente em ${delay / 1000}s...`);
                                        await new Promise(res => setTimeout(res, delay));
                                        delay *= 2;
                                        retries++;
                                        continue;
                                    }
                                    throw new Error(`Erro HTTP! Status: ${response.status}`);
                                }

                                result = await response.json();
                                break;
                            } catch (error) {
                                console.error("Erro ao buscar da API Gemini (tema):", error);
                                retries++;
                                if (retries < maxRetries) {
                                    console.warn(`Tentando novamente em ${delay / 1000}s...`);
                                    await new Promise(res => setTimeout(res, delay));
                                    delay *= 2;
                                } else {
                                    throw error;
                                }
                            }
                        }

                        if (!result) {
                            throw new Error("Falha ao obter resposta da API Gemini (tema) após múltiplas tentativas.");
                        }

                        const jsonText = result.candidates[0].content.parts[0].text;
                        const parsedTema = JSON.parse(jsonText);

                        currentRedacaoTheme = parsedTema.tema;
                        currentRedacaoTopics = parsedTema.topicos;

                        redacaoTema.textContent = currentRedacaoTheme;
                        redacaoTopicos.innerHTML = currentRedacaoTopics.map(topic => `<li>${topic}</li>`).join('');
                        temaRedacaoOutput.classList.remove('hidden');
                        verEspelhoRedacaoBtn.classList.remove('hidden'); // Mostra o botão do espelho

                    } catch (error) {
                        console.error('Erro ao gerar tema de redação:', error);
                        temaRedacaoOutput.innerHTML = `<p class="text-red-500 text-center">Ocorreu um erro ao gerar o tema: ${error.message}.</p>`;
                        temaRedacaoOutput.classList.remove('hidden');
                    } finally {
                        loadingRedacaoTheme.classList.add('hidden');
                    }
                });
            }

            // Lógica para Geração de Espelho Padrão de Redação
            if (verEspelhoRedacaoBtn) {
                verEspelhoRedacaoBtn.addEventListener('click', async () => {
                    if (!currentRedacaoTheme || currentRedacaoTopics.length === 0) {
                        espelhoRedacaoOutput.innerHTML = '<p class="text-red-500 text-center">Por favor, gere um tema de redação primeiro.</p>';
                        espelhoRedacaoOutput.classList.remove('hidden');
                        return;
                    }

                    loadingEspelhoRedacao.classList.remove('hidden');
                    espelhoRedacaoOutput.classList.add('hidden'); // Esconde espelho anterior
                    espelhoRedacaoOutput.innerHTML = ''; // Limpa conteúdo anterior

                    const promptEspelho = `Com base no tema "${currentRedacaoTheme}" e nos tópicos "${currentRedacaoTopics.join(', ')}", escreva uma redação para concurso de Analista em TI no TJPE. A redação deve ter:
- Uma introdução (máximo de 4 linhas).
- Três parágrafos de desenvolvimento, sendo um para cada tópico.
- Uma conclusão (máximo de 3 linhas) sintetizada.
- O total da redação não deve exceder 30 linhas de uma folha A4.
- Foque na aplicação prática no TJPE e na linguagem formal de um concurso.
`;
                    try {
                        // Payload para a API Gemini (diretamente, sem proxy aqui no Canvas)
                        const payload = {
                            contents: [{ role: "user", parts: [{ text: promptEspelho }] }],
                            generationConfig: {
                                responseMimeType: "text/plain"
                            }
                        };

                        // URL DIRETA da API Gemini para uso no Canvas
                        const apiKey = ""; // A API Key é injetada automaticamente pelo Canvas
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                        let retries = 0;
                        const maxRetries = 5;
                        let delay = 1000;

                        let result;
                        while (retries < maxRetries) {
                            try {
                                const response = await fetch(apiUrl, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify(payload)
                                });

                                if (!response.ok) {
                                    if (response.status === 429) {
                                        console.warn(`Limite de taxa atingido. Tentando novamente em ${delay / 1000}s...`);
                                        await new Promise(res => setTimeout(res, delay));
                                        delay *= 2;
                                        retries++;
                                        continue;
                                    }
                                    throw new Error(`Erro HTTP! Status: ${response.status}`);
                                }

                                result = await response.json();
                                break;
                            } catch (error) {
                                console.error("Erro ao buscar da API Gemini (espelho):", error);
                                retries++;
                                if (retries < maxRetries) {
                                    console.warn(`Tentando novamente em ${delay / 1000}s...`);
                                    await new Promise(res => setTimeout(res, delay));
                                    delay *= 2;
                                } else {
                                    throw error;
                                }
                            }
                        }

                        if (!result) {
                            throw new Error("Falha ao obter resposta da API Gemini (espelho) após múltiplas tentativas.");
                        }

                        const espelhoText = result.candidates[0].content.parts[0].text;
                        espelhoRedacaoOutput.textContent = espelhoText; // Usa textContent para preservar formatação básica
                        espelhoRedacaoOutput.classList.remove('hidden');

                    } catch (error) {
                        console.error('Erro ao gerar espelho de redação:', error);
                        espelhoRedacaoOutput.innerHTML = `<p class="text-red-500 text-center">Ocorreu um erro ao gerar o espelho: ${error.message}.</p>`;
                        espelhoRedacaoOutput.classList.remove('hidden');
                    } finally {
                        loadingEspelhoRedacao.classList.add('hidden');
                    }
                });
            }
        });
    </script>

</body>

</html>